<!-- Version 4.2 - Enhanced Audiobook with Continuous Reading - Deployed: 2025-08-27 -->
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cultura Builder - Manuscrito Digital</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&family=JetBrains+Mono:wght@400;600&display=swap" rel="stylesheet">
    <!-- Lucide Icons v3 - Updated 2025 -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js?v=20250822"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        /* Dark Theme (Default) - Professional Book Style */
        :root {
            --bg-primary: #0a0a0a;
            --bg-secondary: #111111;
            --bg-tertiary: #1a1a1a;
            --text-primary: #ffffff;
            --text-secondary: #a0a0a0;
            --text-tertiary: #666666;
            --accent: #ffffff;
            --border: rgba(255, 255, 255, 0.1);
            --sidebar-width: 320px;
            --code-bg: #1a1a1a;
            
            /* Typography System */
            --font-serif: 'Georgia', 'Times New Roman', serif;
            --font-sans: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            --font-mono: 'JetBrains Mono', 'Courier New', monospace;
            
            /* Book-like spacing */
            --paragraph-spacing: 1.5em;
            --line-height-body: 1.8;
            --letter-spacing-body: 0.01em;
        }
        
        /* Light Theme */
        body.light-mode {
            --bg-primary: #ffffff;
            --bg-secondary: #f9fafb;
            --bg-tertiary: #f3f4f6;
            --text-primary: #111827;
            --text-secondary: #4b5563;
            --text-tertiary: #9ca3af;
            --accent: #111827;
            --border: rgba(0, 0, 0, 0.1);
            --code-bg: #f3f4f6;
        }
        
        body {
            font-family: var(--font-sans);
            background: var(--bg-primary);
            color: var(--text-primary);
            overflow: hidden;
            transition: background 0.3s, color 0.3s;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            text-rendering: optimizeLegibility;
        }
        
        /* Layout */
        .app-container {
            display: flex;
            height: 100vh;
        }
        
        /* Sidebar */
        .sidebar {
            width: var(--sidebar-width);
            background: var(--bg-secondary);
            border-right: 1px solid var(--border);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            transition: background 0.3s;
        }
        
        .sidebar-header {
            padding: 24px;
            border-bottom: 1px solid var(--border);
        }
        
        .sidebar-title {
            font-size: 20px;
            font-weight: 800;
            margin-bottom: 16px;
        }
        
        .search-container {
            position: relative;
        }
        
        .search-input {
            width: 100%;
            padding: 10px 40px 10px 16px;
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text-primary);
            font-size: 14px;
            transition: all 0.3s;
        }
        
        .search-input:focus {
            outline: none;
            border-color: var(--text-tertiary);
            background: var(--bg-tertiary);
        }
        
        .search-input::placeholder {
            color: var(--text-tertiary);
        }
        
        .search-icon {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-tertiary);
        }
        
        /* Chapter List */
        .chapter-list {
            flex: 1;
            overflow-y: auto;
            padding: 8px;
        }
        
        .chapter-list::-webkit-scrollbar {
            width: 6px;
        }
        
        .chapter-list::-webkit-scrollbar-track {
            background: transparent;
        }
        
        .chapter-list::-webkit-scrollbar-thumb {
            background: var(--border);
            border-radius: 3px;
        }
        
        .chapter-list::-webkit-scrollbar-thumb:hover {
            background: var(--text-tertiary);
        }
        
        .part-header {
            font-size: 10px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 2px;
            color: var(--text-tertiary);
            padding: 20px 16px 12px;
            margin-top: 12px;
            border-top: 1px solid var(--border);
            font-family: var(--font-sans);
            opacity: 0.7;
        }
        
        .part-header:first-child {
            border-top: none;
            margin-top: 0;
        }
        
        .chapter-item {
            padding: 12px 16px;
            margin: 2px 0;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
            border: 1px solid transparent;
        }
        
        .chapter-item:hover {
            background: var(--bg-tertiary);
        }
        
        .chapter-item.active {
            background: var(--bg-tertiary);
            border-color: var(--border);
        }
        
        .chapter-number {
            font-size: 9px;
            font-weight: 500;
            color: var(--text-tertiary);
            text-transform: uppercase;
            letter-spacing: 1.5px;
            margin-bottom: 6px;
            font-family: var(--font-sans);
            opacity: 0.6;
        }
        
        .chapter-title {
            font-size: 14px;
            font-weight: 400;
            color: var(--text-secondary);
            line-height: 1.5;
            font-family: var(--font-sans);
            letter-spacing: 0.2px;
        }
        
        .chapter-item:hover .chapter-title {
            color: var(--text-primary);
        }
        
        .chapter-item.active .chapter-title {
            color: var(--text-primary);
            font-weight: 500;
        }
        
        /* Main Content */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        /* Reader Header */
        .reader-header {
            padding: 24px 40px;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: var(--bg-secondary);
            transition: background 0.3s;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .reader-controls {
            display: flex;
            gap: 16px;
        }
        
        .control-btn {
            padding: 8px 16px;
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            border-radius: 6px;
            color: var(--text-secondary);
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .control-btn:hover {
            background: var(--border);
            color: var(--text-primary);
        }
        
        .control-btn.active {
            background: var(--text-primary);
            color: var(--bg-primary);
        }
        
        /* Content Area with Infinite Scroll */
        .content-area {
            flex: 1;
            overflow-y: auto;
            padding: 60px;
            max-width: 900px;
            margin: 0 auto;
            width: 100%;
            /* Copy Protection */
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            /* Disable highlighting */
            -webkit-touch-callout: none;
            -webkit-tap-highlight-color: transparent;
        }
        
        .content-area::-webkit-scrollbar {
            width: 10px;
        }
        
        .content-area::-webkit-scrollbar-track {
            background: var(--bg-secondary);
        }
        
        .content-area::-webkit-scrollbar-thumb {
            background: var(--bg-tertiary);
            border-radius: 5px;
        }
        
        .content-area::-webkit-scrollbar-thumb:hover {
            background: var(--text-tertiary);
        }
        
        /* Chapter Container for Infinite Scroll */
        .chapter-container {
            min-height: 100vh;
            padding-bottom: 150px;
            border-bottom: 2px solid var(--border);
            margin-bottom: 50px;
            position: relative;
        }
        
        .chapter-container:last-child {
            border-bottom: none;
            padding-bottom: 200px;
        }
        
        /* Professional Book Typography */
        .content-area h1 {
            font-family: var(--font-serif);
            font-size: 42px;
            font-weight: 700;
            margin: 0 0 32px 0;
            line-height: 1.2;
            letter-spacing: -0.5px;
            color: var(--text-primary);
            text-align: left;
            border-bottom: 2px solid var(--border);
            padding-bottom: 16px;
        }
        
        .content-area h2 {
            font-family: var(--font-serif);
            font-size: 28px;
            font-weight: 600;
            margin: 48px 0 24px;
            line-height: 1.35;
            letter-spacing: 0;
            color: var(--text-primary);
        }
        
        .content-area h3 {
            font-family: var(--font-sans);
            font-size: 22px;
            font-weight: 600;
            margin: 36px 0 18px;
            line-height: 1.4;
            letter-spacing: -0.2px;
            color: var(--text-primary);
        }
        
        .content-area h4 {
            font-family: var(--font-sans);
            font-size: 19px;
            font-weight: 600;
            margin: 28px 0 16px;
            line-height: 1.45;
            color: var(--text-primary);
        }
        
        .content-area h5 {
            font-family: var(--font-sans);
            font-size: 17px;
            font-weight: 600;
            margin: 24px 0 14px;
            line-height: 1.5;
            color: var(--text-primary);
        }
        
        .content-area h6 {
            font-family: var(--font-sans);
            font-size: 16px;
            font-weight: 600;
            margin: 20px 0 12px;
            line-height: 1.5;
            color: var(--text-primary);
            font-style: italic;
        }
        
        /* Book-style paragraph formatting */
        .content-area p {
            font-family: var(--font-serif);
            font-size: 18px;
            line-height: 1.85;
            margin-bottom: var(--paragraph-spacing);
            color: var(--text-secondary);
            text-align: justify;
            text-indent: 2em;
            letter-spacing: var(--letter-spacing-body);
            hyphens: auto;
            word-spacing: 0.05em;
        }
        
        /* First paragraph after heading - no indent */
        .content-area h1 + p,
        .content-area h2 + p,
        .content-area h3 + p,
        .content-area h4 + p,
        .content-area h5 + p,
        .content-area h6 + p {
            text-indent: 0;
        }
        
        /* Drop cap for chapter start */
        .chapter-container > p:first-of-type:first-letter {
            float: left;
            font-family: var(--font-serif);
            font-size: 80px;
            line-height: 65px;
            padding-right: 8px;
            margin-top: 8px;
            font-weight: 700;
            color: var(--text-primary);
        }
        
        .content-area blockquote {
            font-family: var(--font-serif);
            border-left: 4px solid var(--border);
            padding: 20px 32px;
            margin: 32px 0;
            font-style: italic;
            font-size: 17px;
            line-height: 1.75;
            color: var(--text-secondary);
            background: var(--bg-tertiary);
            border-radius: 4px;
            quotes: """ """ "'" "'";
        }
        
        .content-area blockquote::before {
            content: open-quote;
            font-size: 32px;
            line-height: 0;
            margin-right: 8px;
            vertical-align: -8px;
            color: var(--text-tertiary);
        }
        
        .content-area blockquote p {
            text-indent: 0;
            margin-bottom: 0.5em;
        }
        
        .content-area blockquote p:last-child {
            margin-bottom: 0;
        }
        
        .content-area code {
            font-family: var(--font-mono);
            background: var(--code-bg);
            padding: 3px 6px;
            border-radius: 4px;
            font-size: 15px;
            color: var(--text-primary);
        }
        
        .content-area pre {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 24px;
            overflow-x: auto;
            margin: 28px 0;
            font-size: 14px;
            line-height: 1.6;
        }
        
        .content-area pre code {
            background: transparent;
            padding: 0;
            font-size: 14px;
        }
        
        .content-area ul, .content-area ol {
            margin: 24px 0;
            padding-left: 32px;
            font-family: var(--font-serif);
        }
        
        .content-area li {
            margin: 10px 0;
            line-height: 1.85;
            color: var(--text-secondary);
            font-size: 18px;
        }
        
        .content-area strong {
            color: var(--text-primary);
            font-weight: 700;
            letter-spacing: -0.2px;
        }
        
        .content-area em {
            font-style: italic;
            color: inherit;
        }
        
        /* Horizontal rule - book style */
        .content-area hr {
            border: none;
            text-align: center;
            margin: 48px 0;
            position: relative;
        }
        
        .content-area hr::before {
            content: "❦";
            font-size: 20px;
            color: var(--text-tertiary);
            position: relative;
            top: -10px;
        }
        
        /* Loading State */
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 40px;
            color: var(--text-tertiary);
        }
        
        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 3px solid var(--border);
            border-top-color: var(--text-primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        @keyframes slideOut {
            from { transform: translateX(0); opacity: 1; }
            to { transform: translateX(100%); opacity: 0; }
        }
        
        /* Progress Bar */
        .progress-bar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: var(--border);
            z-index: 1000;
        }
        
        .progress-fill {
            height: 100%;
            background: var(--accent);
            width: 0%;
            transition: width 0.3s;
        }
        
        /* Loading more indicator */
        .loading-more {
            text-align: center;
            padding: 40px;
            color: var(--text-tertiary);
            font-size: 14px;
        }
        
        /* Mobile Responsive */
        @media (max-width: 1024px) {
            .content-area {
                padding: 40px;
                max-width: 100%;
            }
        }
        
        @media (max-width: 768px) {
            :root {
                --sidebar-width: 280px;
            }
            
            .menu-toggle {
                display: block !important;
            }
            
            .sidebar {
                position: fixed;
                left: -100%;
                top: 0;
                z-index: 1000;
                transition: left 0.3s;
                width: var(--sidebar-width);
                height: 100vh;
                box-shadow: 4px 0 12px rgba(0, 0, 0, 0.3);
            }
            
            .sidebar.open {
                left: 0;
            }
            
            .sidebar-overlay {
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0, 0, 0, 0.6);
                z-index: 999;
                backdrop-filter: blur(4px);
            }
            
            .sidebar-overlay.active {
                display: block;
            }
            
            .main-content {
                width: 100%;
            }
            
            .reader-header {
                padding: 16px 20px;
            }
            
            .content-area {
                padding: 20px;
                max-width: 100%;
            }
            
            .chapter-container {
                padding-bottom: 100px;
            }
            
            .content-area h1 {
                font-size: 28px;
                letter-spacing: -1px;
            }
            
            .content-area h2 {
                font-size: 22px;
                margin: 32px 0 16px;
            }
            
            .content-area h3 {
                font-size: 18px;
                margin: 24px 0 12px;
            }
            
            .content-area p {
                font-size: 16px;
                line-height: 1.7;
                margin-bottom: 20px;
            }
            
            .reader-controls {
                gap: 8px;
            }
            
            .control-btn {
                padding: 6px 12px;
                font-size: 13px;
            }
        }
        
        @media (max-width: 480px) {
            :root {
                --sidebar-width: 100%;
            }
            
            .sidebar-header {
                padding: 20px;
            }
            
            .sidebar-title {
                font-size: 18px;
            }
            
            .content-area {
                padding: 16px;
            }
            
            .content-area h1 {
                font-size: 24px;
            }
            
            .content-area h2 {
                font-size: 20px;
            }
            
            .content-area h3 {
                font-size: 17px;
            }
            
            .content-area p {
                font-size: 15px;
            }
            
            .reader-info span {
                font-size: 12px !important;
            }
        }
        
        /* Mobile Menu Removed - Sidebar always visible on desktop */
        
        @media (max-width: 768px) {
            
            .sidebar-header {
                padding-top: 24px;
            }
            
            .reader-header {
                padding: 16px 20px;
            }
        }
        
        /* Scroll Mode Toggle */
        .scroll-mode-toggle {
            display: flex;
            gap: 8px;
            background: var(--bg-tertiary);
            padding: 4px;
            border-radius: 8px;
            border: 1px solid var(--border);
        }
        
        .scroll-mode-btn {
            padding: 6px 12px;
            background: transparent;
            border: none;
            color: var(--text-secondary);
            font-size: 13px;
            cursor: pointer;
            border-radius: 4px;
            transition: all 0.2s;
        }
        
        .scroll-mode-btn.active {
            background: var(--text-primary);
            color: var(--bg-primary);
        }
        
        /* Search Results Styles */
        .search-results {
            padding: 12px;
            background: rgba(59, 130, 246, 0.05);
            border: 1px solid rgba(59, 130, 246, 0.2);
            border-radius: 6px;
            margin: 12px 0;
        }
        
        .search-results.no-results {
            background: rgba(239, 68, 68, 0.05);
            border-color: rgba(239, 68, 68, 0.2);
        }
        
        .search-summary {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 13px;
            color: var(--text-secondary);
        }
        
        .clear-search {
            padding: 4px 8px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 4px;
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 12px;
        }
        
        .clear-search:hover {
            background: rgba(255, 255, 255, 0.15);
            color: var(--text-primary);
        }
        
        .chapter-item.search-match {
            background: rgba(59, 130, 246, 0.05);
            border: 1px solid rgba(59, 130, 246, 0.1);
        }
        
        .search-count {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            padding: 2px 6px;
            background: rgba(59, 130, 246, 0.2);
            color: #3b82f6;
            border-radius: 10px;
            font-size: 11px;
            font-weight: 600;
        }
        
        mark {
            background: linear-gradient(90deg, rgba(255, 215, 0, 0.4), rgba(255, 215, 0, 0.6));
            color: var(--text-primary);
            padding: 2px 4px;
            border-radius: 3px;
            font-weight: 600;
            box-shadow: 0 0 0 2px rgba(255, 215, 0, 0.2);
            animation: highlight-pulse 1.5s ease-in-out infinite;
        }
        
        @keyframes highlight-pulse {
            0%, 100% { background: linear-gradient(90deg, rgba(255, 215, 0, 0.4), rgba(255, 215, 0, 0.6)); }
            50% { background: linear-gradient(90deg, rgba(255, 215, 0, 0.6), rgba(255, 215, 0, 0.8)); }
        }
        
        .search-highlight {
            background: rgba(255, 215, 0, 0.3);
            padding: 2px 0;
            border-bottom: 2px solid var(--primary);
            font-weight: 500;
        }
        
        /* Loading indicator for search */
        .search-loading {
            padding: 8px;
            text-align: center;
            color: var(--text-tertiary);
            font-size: 12px;
        }
        
        .search-loading::after {
            content: '...';
            animation: dots 1.5s infinite;
        }
        
        @keyframes dots {
            0%, 20% { content: '.'; }
            40% { content: '..'; }
            60%, 100% { content: '...'; }
        }
        
        /* Lucide Icon Styles */
        .control-btn {
            display: inline-flex;
            align-items: center;
            gap: 4px;
        }
        
        .control-btn svg,
        .search-icon svg,
        .menu-toggle svg {
            width: 18px;
            height: 18px;
            stroke-width: 2;
        }
        
        .search-icon {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .menu-toggle {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .w-4 { width: 16px; }
        .h-4 { height: 16px; }
        .w-5 { width: 20px; }
        .h-5 { height: 20px; }
    </style>
</head>
<body>
    <div class="sidebar-overlay" id="sidebarOverlay" onclick="toggleSidebar()"></div>
    <div class="progress-bar">
        <div class="progress-fill" id="progressBar"></div>
    </div>
    
    
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h1 class="sidebar-title">Cultura Builder</h1>
                <div class="search-container">
                    <input 
                        type="text" 
                        class="search-input" 
                        placeholder="Buscar no livro..."
                        id="searchInput"
                        onkeyup="searchChapters()"
                    >
                    <span class="search-icon">
                        <i data-lucide="search" class="w-4 h-4"></i>
                    </span>
                </div>
            </div>
            
            <div class="chapter-list" id="chapterList">
                <!-- Chapters will be dynamically loaded here -->
            </div>
        </aside>
        
        <!-- Main Content -->
        <main class="main-content">
            <header class="reader-header">
                <div class="reader-info" style="display: flex; align-items: center; gap: 16px;">
                    <button class="menu-toggle" onclick="toggleSidebar()" style="display: none; background: transparent; border: none; color: var(--text-secondary); cursor: pointer; padding: 4px;">
                        <i data-lucide="menu" class="w-5 h-5"></i>
                    </button>
                    <span id="currentChapter" style="color: var(--text-secondary); font-size: 14px;">
                        Carregando...
                    </span>
                </div>
                <div class="reader-controls">
                    <!-- Voice Controls -->
                    <button class="control-btn" onclick="toggleVoiceOver()">
                        <i id="voiceIcon" data-lucide="volume-2" class="w-4 h-4"></i>
                        <span>Ler</span>
                    </button>
                    <button class="control-btn" id="pauseBtn" onclick="pauseResumeVoice()" style="display: none;">
                        <i id="pauseIcon" data-lucide="pause" class="w-4 h-4"></i>
                        <span id="pauseText">Pausar</span>
                    </button>
                    <button class="control-btn" id="stopBtn" onclick="stopVoice()" style="display: none;">
                        <i data-lucide="square" class="w-4 h-4"></i>
                        <span>Parar</span>
                    </button>
                    <button class="control-btn" id="voiceSettings" onclick="toggleVoiceSettings()" style="display: none; position: relative;">
                        <i data-lucide="settings" class="w-4 h-4"></i>
                        <div id="voiceDropdown" style="display: none; position: absolute; top: 100%; right: 0; margin-top: 8px; background: var(--bg-secondary); border: 1px solid var(--border); border-radius: 8px; padding: 16px; min-width: 250px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3); z-index: 200;">
                            <label style="display: block; margin-bottom: 12px;">
                                <span style="font-size: 12px; color: var(--text-tertiary); display: block; margin-bottom: 4px;">Voz:</span>
                                <select id="voiceSelect" style="width: 100%; padding: 6px; background: var(--bg-tertiary); border: 1px solid var(--border); border-radius: 4px; color: var(--text-primary); font-size: 13px;"></select>
                            </label>
                            <label style="display: block; margin-bottom: 12px;">
                                <span style="font-size: 12px; color: var(--text-tertiary); display: block; margin-bottom: 4px;">Velocidade: <span id="speedValue">1.0</span></span>
                                <input type="range" id="speedRange" min="0.5" max="2" step="0.1" value="1" style="width: 100%;" onchange="updateVoiceSettings()">
                            </label>
                            <label style="display: block;">
                                <span style="font-size: 12px; color: var(--text-tertiary); display: block; margin-bottom: 4px;">Tom: <span id="pitchValue">1.0</span></span>
                                <input type="range" id="pitchRange" min="0.5" max="2" step="0.1" value="1" style="width: 100%;" onchange="updateVoiceSettings()">
                            </label>
                        </div>
                    </button>
                    
                    <!-- Navigation Controls -->
                    <div style="border-left: 1px solid var(--border); margin: 0 8px; height: 24px;"></div>
                    
                    <!-- Font Controls -->
                    <button class="control-btn" onclick="decreaseFontSize()">
                        <i data-lucide="zoom-out" class="w-4 h-4"></i>
                        <span>A-</span>
                    </button>
                    <button class="control-btn" onclick="increaseFontSize()">
                        <i data-lucide="zoom-in" class="w-4 h-4"></i>
                        <span>A+</span>
                    </button>
                    
                    <!-- Theme Toggle -->
                    <button class="control-btn" id="themeToggle" onclick="toggleTheme()">
                        <i data-lucide="moon" class="w-4 h-4 theme-icon-dark"></i>
                        <i data-lucide="sun" class="w-4 h-4 theme-icon-light" style="display: none;"></i>
                    </button>
                </div>
            </header>
            
            <div class="content-area" id="contentArea" onscroll="handleScroll()">
                <div class="loading">
                    <div class="loading-spinner"></div>
                </div>
            </div>
        </main>
    </div>
    
    <script>
        // Enhanced Voice Over System with Continuous Reading
        let speechSynthesis = window.speechSynthesis;
        let currentUtterance = null;
        let isPaused = false;
        let isReading = false;
        let voices = [];
        let selectedVoice = null;
        let speechRate = 1.0;
        let speechPitch = 1.0;
        let currentSentenceIndex = 0;
        let sentences = [];
        let isReadingContinuously = false;
        let chapterQueue = [];
        let currentAudioChapterIndex = 0;
        
        // Initialize voices with better compatibility
        function loadVoices() {
            voices = speechSynthesis.getVoices();
            const voiceSelect = document.getElementById('voiceSelect');
            
            // Ensure we have voices before populating
            if (!voiceSelect || voices.length === 0) {
                setTimeout(loadVoices, 200);
                return;
            }
            
            const currentValue = voiceSelect.value;
            voiceSelect.innerHTML = '';
                
                // Filter Portuguese and English voices
                const ptVoices = voices.filter(voice => voice.lang.includes('pt'));
                const enVoices = voices.filter(voice => voice.lang.includes('en'));
                
                // Add Portuguese voices first
                if (ptVoices.length > 0) {
                    const ptGroup = document.createElement('optgroup');
                    ptGroup.label = 'Português';
                    ptVoices.forEach((voice, index) => {
                        const option = document.createElement('option');
                        option.value = voices.indexOf(voice);
                        option.textContent = `${voice.name} (${voice.lang})`;
                        if (index === 0) option.selected = true;
                        ptGroup.appendChild(option);
                    });
                    voiceSelect.appendChild(ptGroup);
                    selectedVoice = ptVoices[0];
                }
                
                // Add English voices as fallback
                if (enVoices.length > 0) {
                    const enGroup = document.createElement('optgroup');
                    enGroup.label = 'English';
                    enVoices.forEach(voice => {
                        const option = document.createElement('option');
                        option.value = voices.indexOf(voice);
                        option.textContent = `${voice.name} (${voice.lang})`;
                        enGroup.appendChild(option);
                    });
                    voiceSelect.appendChild(enGroup);
                    
                    if (!selectedVoice) selectedVoice = enVoices[0];
                }
                
                // Add other voices
                const otherVoices = voices.filter(voice => !voice.lang.includes('pt') && !voice.lang.includes('en'));
                if (otherVoices.length > 0) {
                    const otherGroup = document.createElement('optgroup');
                    otherGroup.label = 'Outros';
                    otherVoices.forEach(voice => {
                        const option = document.createElement('option');
                        option.value = voices.indexOf(voice);
                        option.textContent = `${voice.name} (${voice.lang})`;
                        otherGroup.appendChild(option);
                    });
                    voiceSelect.appendChild(otherGroup);
                }
            }
        }
        
        // Load voices when available with multiple attempts
        if (speechSynthesis.onvoiceschanged !== undefined) {
            speechSynthesis.onvoiceschanged = loadVoices;
        }
        // Try loading voices multiple times for better compatibility
        setTimeout(loadVoices, 100);
        setTimeout(loadVoices, 500);
        setTimeout(loadVoices, 1000);
        setTimeout(loadVoices, 2000);
        
        // Toggle voice over with enhanced options
        function toggleVoiceOver() {
            if (!isReading) {
                showAudioOptions();
            } else {
                stopVoice();
            }
        }
        
        // Show audio options dialog
        function showAudioOptions() {
            const modal = document.createElement('div');
            modal.id = 'audioModal';
            modal.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: var(--bg-secondary);
                border: 1px solid var(--border);
                border-radius: 12px;
                padding: 24px;
                z-index: 10000;
                box-shadow: 0 10px 40px rgba(0,0,0,0.5);
                max-width: 400px;
                width: 90%;
            `;
            
            modal.innerHTML = `
                <h3 style="margin-bottom: 16px; font-size: 18px; font-weight: 600;">Opções de Narração</h3>
                <p style="margin-bottom: 20px; color: var(--text-secondary); font-size: 14px;">Escolha como deseja ouvir o conteúdo:</p>
                <div style="display: flex; flex-direction: column; gap: 12px;">
                    <button onclick="closeAudioModal(); startReading();" style="padding: 12px; background: var(--accent); color: var(--bg-primary); border: none; border-radius: 8px; cursor: pointer; font-weight: 500;">
                        📄 Capítulo Atual
                    </button>
                    <button onclick="closeAudioModal(); startContinuousReading();" style="padding: 12px; background: var(--bg-tertiary); color: var(--text-primary); border: 1px solid var(--border); border-radius: 8px; cursor: pointer; font-weight: 500;">
                        📖 Livro Completo (Contínuo)
                    </button>
                    <button onclick="closeAudioModal()" style="padding: 12px; background: transparent; color: var(--text-secondary); border: 1px solid var(--border); border-radius: 8px; cursor: pointer;">
                        Cancelar
                    </button>
                </div>
            `;
            
            const overlay = document.createElement('div');
            overlay.id = 'audioOverlay';
            overlay.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0,0,0,0.5);
                z-index: 9999;
            `;
            overlay.onclick = closeAudioModal;
            
            document.body.appendChild(overlay);
            document.body.appendChild(modal);
        }
        
        // Close audio modal
        function closeAudioModal() {
            const modal = document.getElementById('audioModal');
            const overlay = document.getElementById('audioOverlay');
            if (modal) document.body.removeChild(modal);
            if (overlay) document.body.removeChild(overlay);
        }
        
        // Start continuous reading
        async function startContinuousReading() {
            isReadingContinuously = true;
            currentAudioChapterIndex = currentChapterIndex || 0;
            chapterQueue = allChapters.slice(currentAudioChapterIndex);
            
            console.log(`Starting continuous reading from chapter ${currentAudioChapterIndex + 1}`);
            showNotification('Iniciando narração contínua...');
            
            await readNextChapterInQueue();
        }
        
        // Read next chapter in queue
        async function readNextChapterInQueue() {
            if (!isReadingContinuously || chapterQueue.length === 0) {
                if (isReadingContinuously) {
                    showNotification('Narração completa!');
                }
                stopVoice();
                return;
            }
            
            const chapter = chapterQueue[0];
            
            // Load chapter if needed
            if (scrollMode !== 'infinite') {
                await loadChapter(chapter);
            } else {
                const chapterEl = document.getElementById(`content-${chapter.id}`);
                if (!chapterEl) {
                    await appendChapter(chapter, 'bottom');
                }
                chapterEl?.scrollIntoView({ behavior: 'smooth' });
            }
            
            // Update UI
            updateActiveChapter(chapter.id);
            currentChapterIndex = allChapters.findIndex(ch => ch.id === chapter.id);
            
            // Start reading after content loads
            setTimeout(() => {
                if (isReadingContinuously) {
                    startReading();
                }
            }, 800);
        }
        
        // Show notification
        function showNotification(message) {
            const existing = document.getElementById('notification');
            if (existing) existing.remove();
            
            const notification = document.createElement('div');
            notification.id = 'notification';
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: var(--bg-tertiary);
                color: var(--text-primary);
                padding: 12px 20px;
                border-radius: 8px;
                border: 1px solid var(--border);
                box-shadow: 0 4px 12px rgba(0,0,0,0.3);
                z-index: 10000;
                animation: slideIn 0.3s ease;
            `;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }
        
        // Start reading the current chapter
        function startReading() {
            const contentArea = document.getElementById('contentArea');
            if (!contentArea) return;
            
            // Get all text content from the current view
            let textToRead = '';
            
            // Get visible chapter content
            const visibleChapters = contentArea.querySelectorAll('.chapter-container');
            visibleChapters.forEach(chapter => {
                // Extract text from different elements
                const elements = chapter.querySelectorAll('h1, h2, h3, h4, h5, h6, p, li, blockquote');
                elements.forEach(el => {
                    // Skip if element is not visible
                    const rect = el.getBoundingClientRect();
                    if (rect.top < window.innerHeight && rect.bottom > 0) {
                        textToRead += el.textContent + '. ';
                    }
                });
            });
            
            if (!textToRead) {
                alert('Nenhum texto disponível para narração.');
                return;
            }
            
            // Split into sentences for better control
            sentences = textToRead.match(/[^.!?]+[.!?]+/g) || [textToRead];
            currentSentenceIndex = 0;
            
            isReading = true;
            updateVoiceControls();
            
            // Start reading from the beginning
            readNextSentence();
        }
        
        // Read next sentence
        function readNextSentence() {
            if (currentSentenceIndex >= sentences.length) {
                stopVoice();
                return;
            }
            
            const text = sentences[currentSentenceIndex];
            currentUtterance = new SpeechSynthesisUtterance(text);
            
            // Set voice and properties
            if (selectedVoice) {
                currentUtterance.voice = selectedVoice;
            }
            currentUtterance.rate = speechRate;
            currentUtterance.pitch = speechPitch;
            currentUtterance.volume = 1.0;
            
            // Handle events
            currentUtterance.onend = () => {
                currentSentenceIndex++;
                if (currentSentenceIndex < sentences.length && isReading && !isPaused) {
                    readNextSentence();
                } else if (isReadingContinuously && currentSentenceIndex >= sentences.length) {
                    // Move to next chapter
                    handleContinuousReading();
                } else if (!isReadingContinuously && currentSentenceIndex >= sentences.length) {
                    stopVoice();
                }
            };
            
            currentUtterance.onerror = (event) => {
                console.error('Speech synthesis error:', event);
                if (event.error === 'interrupted' || event.error === 'canceled') return;
                stopVoice();
            };
            
            speechSynthesis.speak(currentUtterance);
        }
        
        // Pause or resume reading
        function pauseResumeVoice() {
            if (!isReading) return;
            
            if (isPaused) {
                speechSynthesis.resume();
                isPaused = false;
                document.getElementById('pauseText').textContent = 'Pausar';
                document.getElementById('pauseIcon').setAttribute('data-lucide', 'pause');
            } else {
                speechSynthesis.pause();
                isPaused = true;
                document.getElementById('pauseText').textContent = 'Retomar';
                document.getElementById('pauseIcon').setAttribute('data-lucide', 'play');
            }
            lucide.createIcons();
        }
        
        // Handle continuous reading between chapters
        function handleContinuousReading() {
            if (!isReadingContinuously || chapterQueue.length <= 1) {
                stopVoice();
                showNotification('Leitura completa!');
                return;
            }
            
            // Remove current chapter from queue
            chapterQueue.shift();
            const nextChapter = chapterQueue[0];
            
            if (nextChapter) {
                showNotification(`Próximo: ${nextChapter.title}`);
                setTimeout(() => {
                    readNextChapterInQueue();
                }, 2000);
            }
        }
        
        // Stop reading
        function stopVoice() {
            if (speechSynthesis.speaking) {
                speechSynthesis.cancel();
            }
            isReading = false;
            isPaused = false;
            isReadingContinuously = false;
            currentSentenceIndex = 0;
            sentences = [];
            chapterQueue = [];
            updateVoiceControls();
        }
        
        // Update voice controls visibility
        function updateVoiceControls() {
            const voiceBtn = document.querySelector('button[onclick="toggleVoiceOver()"]');
            const pauseBtn = document.getElementById('pauseBtn');
            const stopBtn = document.getElementById('stopBtn');
            const voiceSettings = document.getElementById('voiceSettings');
            const voiceIcon = document.getElementById('voiceIcon');
            
            if (isReading) {
                if (voiceBtn) {
                    voiceBtn.classList.add('active');
                    voiceIcon.setAttribute('data-lucide', 'volume-x');
                }
                pauseBtn.style.display = 'inline-flex';
                stopBtn.style.display = 'inline-flex';
                voiceSettings.style.display = 'inline-block';
            } else {
                if (voiceBtn) {
                    voiceBtn.classList.remove('active');
                    voiceIcon.setAttribute('data-lucide', 'volume-2');
                }
                pauseBtn.style.display = 'none';
                stopBtn.style.display = 'none';
                voiceSettings.style.display = 'none';
                document.getElementById('voiceDropdown').style.display = 'none';
            }
            
            lucide.createIcons();
        }
        
        // Toggle voice settings dropdown
        function toggleVoiceSettings() {
            const dropdown = document.getElementById('voiceDropdown');
            dropdown.style.display = dropdown.style.display === 'none' ? 'block' : 'none';
        }
        
        // Update voice settings
        function updateVoiceSettings() {
            const voiceSelect = document.getElementById('voiceSelect');
            const speedRange = document.getElementById('speedRange');
            const pitchRange = document.getElementById('pitchRange');
            const speedValue = document.getElementById('speedValue');
            const pitchValue = document.getElementById('pitchValue');
            
            if (voiceSelect && voices.length > 0) {
                selectedVoice = voices[voiceSelect.value];
            }
            
            speechRate = parseFloat(speedRange.value);
            speechPitch = parseFloat(pitchRange.value);
            
            speedValue.textContent = speechRate.toFixed(1) + 'x';
            pitchValue.textContent = speechPitch.toFixed(1);
            
            // Save preferences
            localStorage.setItem('voiceSettings', JSON.stringify({
                voiceIndex: voiceSelect ? voiceSelect.value : 0,
                rate: speechRate,
                pitch: speechPitch
            }));
            
            // If currently reading, restart with new settings
            if (isReading && currentUtterance) {
                speechSynthesis.cancel();
                readNextSentence();
            }
        }
        
        // Load saved voice settings
        function loadVoiceSettings() {
            const saved = localStorage.getItem('voiceSettings');
            if (saved) {
                try {
                    const settings = JSON.parse(saved);
                    
                    setTimeout(() => {
                        const voiceSelect = document.getElementById('voiceSelect');
                        const speedRange = document.getElementById('speedRange');
                        const pitchRange = document.getElementById('pitchRange');
                        
                        if (voiceSelect && voices.length > 0) {
                            voiceSelect.value = settings.voiceIndex;
                            selectedVoice = voices[settings.voiceIndex];
                        }
                        
                        if (speedRange) {
                            speedRange.value = settings.rate;
                            speechRate = settings.rate;
                        }
                        
                        if (pitchRange) {
                            pitchRange.value = settings.pitch;
                            speechPitch = settings.pitch;
                        }
                        
                        updateVoiceSettings();
                    }, 500);
                } catch (e) {
                    console.error('Error loading voice settings:', e);
                }
            }
        }
        
        // Close dropdown when clicking outside
        document.addEventListener('click', (e) => {
            const dropdown = document.getElementById('voiceDropdown');
            const settingsBtn = e.target.closest('button[onclick="toggleVoiceSettings()"]');
            
            if (dropdown && dropdown.style.display === 'block' && !settingsBtn && !dropdown.contains(e.target)) {
                dropdown.style.display = 'none';
            }
        });
        
        // Stop reading when page unloads
        window.addEventListener('beforeunload', () => {
            if (isReading) {
                stopVoice();
            }
        });
        
        // Load voice settings on page load
        setTimeout(loadVoiceSettings, 1000);
        
        // Chapter data - Complete list with all 33 chapters
        const chapters = [
            { part: "INÍCIO", chapters: [
                { id: "capa", number: "", title: "Capa do Livro", file: "capa.md" },
            ]},
            { part: "PARTE I • O DESPERTAR", chapters: [
                { id: "cap1", number: "1", title: "O Dia em que o ChatGPT Mudou Tudo", icon: "sparkles", file: "parte-01/capitulo-01.md" },
                { id: "cap2", number: "2", title: "O Espelho da História", icon: "history", file: "parte-01/capitulo-02.md" },
                { id: "cap3", number: "3", title: "A Psicologia do Medo Tecnológico", icon: "brain", file: "parte-01/capitulo-03.md" }
            ]},
            { part: "PARTE II • ENTENDENDO O JOGO", chapters: [
                { id: "cap4", number: "4", title: "IA para Humanos", icon: "cpu", file: "parte-02/capitulo-04.md" },
                { id: "cap5", number: "5", title: "Os Arquitetos do Futuro", icon: "building-2", file: "parte-02/capitulo-05.md" },
                { id: "cap6", number: "6", title: "O Novo Contrato Social", icon: "handshake", file: "parte-02/capitulo-06.md" }
            ]},
            { part: "PARTE III • MINDSET BUILDER", chapters: [
                { id: "cap7", number: "7", title: "De Consumidor a Criador", icon: "palette", file: "parte-03/capitulo-07.md" },
                { id: "cap8", number: "8", title: "Pensamento Computacional", icon: "binary", file: "parte-03/capitulo-08.md" },
                { id: "cap9", number: "9", title: "O Arsenal do Builder", icon: "package", file: "parte-03/capitulo-09.md" }
            ]},
            { part: "PARTE IV • MÃOS À OBRA", chapters: [
                { id: "cap10", number: "10", title: "Seu Primeiro Projeto com IA", icon: "rocket", file: "parte-04/capitulo-10.md" },
                { id: "cap11", number: "11", title: "10 Projetos em 30 Dias", icon: "calendar", file: "parte-04/capitulo-11.md" },
                { id: "cap12", number: "12", title: "De Projeto a Produto", icon: "package-check", file: "parte-04/capitulo-12.md" }
            ]},
            { part: "PARTE V • HABILIDADES HUMANAS", chapters: [
                { id: "cap13", number: "13", title: "Criatividade na Era da IA", icon: "sparkle", file: "parte-05/capitulo-13.md" },
                { id: "cap14", number: "14", title: "Pensamento Crítico", icon: "eye", file: "parte-05/capitulo-14.md" },
                { id: "cap15", number: "15", title: "Inteligência Emocional", icon: "heart", file: "parte-05/capitulo-15.md" }
            ]},
            { part: "PARTE VI • CARREIRA BUILDER", chapters: [
                { id: "cap16", number: "16", title: "Profissões do Futuro", icon: "trending-up", file: "parte-06/capitulo-16.md" },
                { id: "cap17", number: "17", title: "Portfolio e Marca Pessoal", icon: "user-check", file: "parte-06/capitulo-17.md" },
                { id: "cap18", number: "18", title: "Aprendizado Contínuo", icon: "graduation-cap", file: "parte-06/capitulo-18.md" }
            ]},
            { part: "PARTE VII • EMPRESAS BUILDERS", chapters: [
                { id: "cap19", number: "19", title: "Cultura de Experimentação", icon: "flask", file: "parte-07/capitulo-19.md" },
                { id: "cap20", number: "20", title: "Lideranças que Multiplicam", icon: "users-2", file: "parte-07/capitulo-20.md" },
                { id: "cap21", number: "21", title: "Estruturas Antifrágeis", icon: "shield", file: "parte-07/capitulo-21.md" }
            ]},
            { part: "PARTE VIII • ÉTICA E RESPONSABILIDADE", chapters: [
                { id: "cap22", number: "22", title: "Ética do Builder", icon: "gavel", file: "parte-08/capitulo-22.md" },
                { id: "cap23", number: "23", title: "Privacidade e Dados", icon: "lock", file: "parte-08/capitulo-23.md" },
                { id: "cap24", number: "24", title: "Construção Responsável", icon: "shield-check", file: "parte-08/capitulo-24.md" }
            ]},
            { part: "PARTE IX • CASES REAIS", chapters: [
                { id: "cap25", number: "25", title: "Do Zero ao Código", icon: "code", file: "parte-09/capitulo-25.md" },
                { id: "cap26", number: "26", title: "Transformação de Carreiras", icon: "refresh-cw", file: "parte-09/capitulo-26.md" },
                { id: "cap27", number: "27", title: "Impacto Social com IA", icon: "globe", file: "parte-09/capitulo-27.md" }
            ]},
            { part: "PARTE X • BRASIL BUILDER", chapters: [
                { id: "cap28", number: "28", title: "O Vale do São Francisco", icon: "map-pin", file: "parte-10/capitulo-28.md" },
                { id: "cap29", number: "29", title: "Empresas Brasileiras", icon: "landmark", file: "parte-10/capitulo-29.md" },
                { id: "cap30", number: "30", title: "Políticas Públicas", icon: "file-text", file: "parte-10/capitulo-30.md" }
            ]},
            { part: "PARTE XI • SEU FUTURO", chapters: [
                { id: "cap31", number: "31", title: "Seu Roadmap Pessoal", icon: "map", file: "parte-11/capitulo-31.md" },
                { id: "cap32", number: "32", title: "Ferramentas Essenciais", icon: "wrench", file: "parte-11/capitulo-32.md" },
                { id: "cap33", number: "33", title: "O Chamado à Ação", icon: "megaphone", file: "parte-11/capitulo-33.md" }
            ]},
            { part: "CONCLUSÃO", chapters: [
                { id: "epilogo", number: "", title: "Epílogo", icon: "book-marked", file: "epilogo.md" },
                { id: "referencias", number: "", title: "Referências e Fontes", icon: "library", file: "referencias.md" }
            ]}
        ];
        
        // Flatten chapters for easier navigation
        const allChapters = [];
        chapters.forEach(part => {
            part.chapters.forEach(chapter => {
                allChapters.push(chapter);
            });
        });
        
        let currentFontSize = 17;
        let currentChapterIndex = 0;
        let scrollMode = 'infinite'; // Always infinite scroll
        let loadedChapters = [];
        let isLoadingMore = false;
        let isDarkMode = true;
        
        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            renderChapterList();
            
            // Check for saved theme preference
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'light') {
                document.body.classList.add('light-mode');
                isDarkMode = false;
                updateThemeButton();
            }
            
            // Always load in infinite scroll mode
            loadInfiniteMode();
            
            // Initialize content protection
            initializeContentProtection();
        });
        
        // Render chapter list
        function renderChapterList() {
            const chapterList = document.getElementById('chapterList');
            let html = '';
            
            chapters.forEach((part, partIndex) => {
                html += `<div class="part-header">${part.part}</div>`;
                part.chapters.forEach((chapter, chapterIndex) => {
                    html += `
                        <div class="chapter-item" 
                             id="chapter-${chapter.id}"
                             onclick="loadChapter(${JSON.stringify(chapter).replace(/"/g, '&quot;')})">
                            ${chapter.number ? `<div class="chapter-number">CAPÍTULO ${chapter.number}</div>` : ''}
                            <div class="chapter-title">${chapter.title}</div>
                            <div class="search-preview" id="preview-${chapter.id}" style="display: none; font-size: 12px; color: var(--text-tertiary); margin-top: 8px; padding: 8px; background: var(--bg-tertiary); border-radius: 4px;"></div>
                        </div>
                    `;
                });
            });
            
            chapterList.innerHTML = html;
            
            // Initialize Lucide icons
            if (window.lucide) lucide.createIcons();
        }
        
        // Load single chapter
        async function loadChapter(chapter) {
            if (scrollMode === 'infinite') {
                // In infinite mode, scroll to chapter if already loaded
                const chapterElement = document.getElementById(`content-${chapter.id}`);
                if (chapterElement) {
                    chapterElement.scrollIntoView({ behavior: 'smooth' });
                    updateActiveChapter(chapter.id);
                    return;
                }
            }
            
            const contentArea = document.getElementById('contentArea');
            const currentChapterEl = document.getElementById('currentChapter');
            
            // Update active state
            updateActiveChapter(chapter.id);
            
            // Show loading
            contentArea.innerHTML = '<div class="loading"><div class="loading-spinner"></div></div>';
            currentChapterEl.textContent = `${chapter.number ? 'Capítulo ' + chapter.number + ' • ' : ''}${chapter.title}`;
            
            try {
                const response = await fetch(`/manuscrito/${chapter.file}`);
                const markdown = await response.text();
                let html = convertMarkdownToHTML(markdown);
                
                // Apply search highlighting if there's an active search
                html = applySearchHighlighting(html);
                
                // Replace emojis with Lucide icons in content
                html = replaceEmojisWithIcons(html);
                
                contentArea.innerHTML = `<div class="chapter-container">${html}</div>`;
                contentArea.scrollTop = 0;
                
                // Apply saved font size
                applyFontSize();
                
                // Update current chapter index
                currentChapterIndex = allChapters.findIndex(ch => ch.id === chapter.id);
                
                // Close sidebar on mobile after selection
                if (window.innerWidth <= 768) {
                    document.getElementById('sidebar').classList.remove('open');
                }
            } catch (error) {
                contentArea.innerHTML = '<p style="color: var(--text-tertiary); text-align: center;">Erro ao carregar capítulo</p>';
            }
        }
        
        // Load infinite scroll mode
        async function loadInfiniteMode() {
            const contentArea = document.getElementById('contentArea');
            contentArea.innerHTML = '<div class="loading"><div class="loading-spinner"></div></div>';
            
            loadedChapters = [];
            
            // Start with the cover (index 0)
            currentChapterIndex = 0;
            
            // Load first 3 chapters sequentially
            await appendChapter(allChapters[0], 'bottom');
            if (allChapters.length > 1) {
                await appendChapter(allChapters[1], 'bottom');
            }
            if (allChapters.length > 2) {
                await appendChapter(allChapters[2], 'bottom');
            }
            
            contentArea.scrollTop = 0;
            updateActiveChapter(allChapters[0].id);
        }
        
        // Append chapter for infinite scroll
        async function appendChapter(chapter, position = 'bottom') {
            if (loadedChapters.find(ch => ch.id === chapter.id)) {
                return; // Already loaded
            }
            
            const contentArea = document.getElementById('contentArea');
            
            try {
                const response = await fetch(`/manuscrito/${chapter.file}`);
                const markdown = await response.text();
                let html = convertMarkdownToHTML(markdown);
                
                // Apply search highlighting if there's an active search
                html = applySearchHighlighting(html);
                
                // Replace emojis with Lucide icons
                html = replaceEmojisWithIcons(html);
                
                // Remove loading indicator if it exists
                const loadingDiv = contentArea.querySelector('.loading');
                if (loadingDiv) {
                    loadingDiv.remove();
                }
                
                // Create chapter container
                const chapterDiv = document.createElement('div');
                chapterDiv.className = 'chapter-container';
                chapterDiv.id = `content-${chapter.id}`;
                chapterDiv.dataset.chapterIndex = allChapters.findIndex(ch => ch.id === chapter.id);
                chapterDiv.innerHTML = `
                    ${html}
                    <div style="position: absolute; bottom: 40px; right: 60px; color: var(--text-tertiary); font-size: 14px; font-weight: 500; opacity: 0.5;">
                        ${chapter.number || ''}
                    </div>
                `;
                
                // Add to DOM based on position
                if (position === 'top') {
                    // Insert at beginning
                    const firstChild = contentArea.firstElementChild;
                    if (firstChild && !firstChild.classList.contains('loading')) {
                        contentArea.insertBefore(chapterDiv, firstChild);
                    } else {
                        contentArea.appendChild(chapterDiv);
                    }
                    loadedChapters.unshift(chapter);
                } else {
                    // Append at end
                    contentArea.appendChild(chapterDiv);
                    loadedChapters.push(chapter);
                }
                
                // Apply saved font size to new content
                applyFontSize();
                
                // Update current chapter if this is the first one
                if (loadedChapters.length === 1) {
                    updateActiveChapter(chapter.id);
                    document.getElementById('currentChapter').textContent = 
                        chapter.number ? `Capítulo ${chapter.number}: ${chapter.title}` : chapter.title;
                    // Re-initialize Lucide icons after content update
                    if (window.lucide) lucide.createIcons();
                }
            } catch (error) {
                console.error('Error loading chapter:', error);
            }
        }
        
        // Handle scroll for infinite mode
        async function handleScroll() {
            const contentArea = document.getElementById('contentArea');
            
            if (scrollMode === 'infinite') {
                // Check which chapter is currently in view
                const chapters = contentArea.querySelectorAll('.chapter-container');
                let currentViewChapter = null;
                
                chapters.forEach(chapterEl => {
                    const rect = chapterEl.getBoundingClientRect();
                    const viewportMiddle = window.innerHeight / 3; // Use top third for better detection
                    
                    if (rect.top <= viewportMiddle && rect.bottom > viewportMiddle) {
                        const chapterId = chapterEl.id.replace('content-', '');
                        currentViewChapter = allChapters.find(ch => ch.id === chapterId);
                    }
                });
                
                if (currentViewChapter) {
                    updateActiveChapter(currentViewChapter.id);
                    const chapterText = currentViewChapter.number 
                        ? `Capítulo ${currentViewChapter.number}: ${currentViewChapter.title}`
                        : currentViewChapter.title;
                    document.getElementById('currentChapter').textContent = chapterText;
                    currentChapterIndex = allChapters.findIndex(ch => ch.id === currentViewChapter.id);
                }
                
                // Load more chapters when near bottom
                const scrollBottom = contentArea.scrollTop + contentArea.clientHeight;
                const scrollHeight = contentArea.scrollHeight;
                
                if (scrollBottom > scrollHeight - 1500 && !isLoadingMore) {
                    isLoadingMore = true;
                    
                    // Find the highest index in loaded chapters
                    let maxLoadedIndex = -1;
                    loadedChapters.forEach(ch => {
                        const index = allChapters.findIndex(ach => ach.id === ch.id);
                        if (index > maxLoadedIndex) maxLoadedIndex = index;
                    });
                    
                    const nextIndex = maxLoadedIndex + 1;
                    
                    // Stop at the last chapter (referencias)
                    if (nextIndex < allChapters.length && nextIndex <= allChapters.length - 1) {
                        // Add loading indicator
                        const loadingMore = document.createElement('div');
                        loadingMore.className = 'loading-more';
                        loadingMore.id = 'loading-bottom';
                        loadingMore.innerHTML = 'Carregando próximo capítulo...';
                        contentArea.appendChild(loadingMore);
                        
                        // Load next chapter
                        await appendChapter(allChapters[nextIndex], 'bottom');
                        
                        // Remove loading indicator
                        const loader = document.getElementById('loading-bottom');
                        if (loader) loader.remove();
                    }
                    
                    isLoadingMore = false;
                }
                
                // Load chapters when scrolling up (near top) - but not if we're at chapter 1
                if (contentArea.scrollTop < 1500 && !isLoadingMore && minLoadedIndex > 0) {
                    isLoadingMore = true;
                    
                    // Find the lowest index in loaded chapters
                    let minLoadedIndex = allChapters.length;
                    loadedChapters.forEach(ch => {
                        const index = allChapters.findIndex(ach => ach.id === ch.id);
                        if (index < minLoadedIndex && index >= 0) minLoadedIndex = index;
                    });
                    
                    const prevIndex = minLoadedIndex - 1;
                    
                    if (prevIndex >= 0) {
                        // Store current scroll position
                        const scrollBefore = contentArea.scrollHeight - contentArea.scrollTop;
                        
                        // Add loading indicator at top
                        const loadingMore = document.createElement('div');
                        loadingMore.className = 'loading-more';
                        loadingMore.id = 'loading-top';
                        loadingMore.innerHTML = 'Carregando capítulo anterior...';
                        contentArea.insertBefore(loadingMore, contentArea.firstChild);
                        
                        // Load previous chapter
                        await appendChapter(allChapters[prevIndex], 'top');
                        
                        // Remove loading indicator
                        const loader = document.getElementById('loading-top');
                        if (loader) loader.remove();
                        
                        // Restore scroll position
                        contentArea.scrollTop = contentArea.scrollHeight - scrollBefore;
                    }
                    
                    isLoadingMore = false;
                }
            }
            
            // Update progress bar based on total book progress
            const totalChapters = allChapters.length;
            const currentProgress = (currentChapterIndex / (totalChapters - 1)) * 100;
            document.getElementById('progressBar').style.width = currentProgress + '%';
        }
        
        // Update active chapter in sidebar
        function updateActiveChapter(chapterId) {
            document.querySelectorAll('.chapter-item').forEach(el => el.classList.remove('active'));
            const activeItem = document.getElementById(`chapter-${chapterId}`);
            if (activeItem) {
                activeItem.classList.add('active');
                // Scroll sidebar to show active item
                activeItem.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
        }
        
        // Convert markdown to HTML
        function convertMarkdownToHTML(markdown) {
            let html = markdown
                .replace(/^###### (.*$)/gim, '<h6>$1</h6>')
                .replace(/^##### (.*$)/gim, '<h5>$1</h5>')
                .replace(/^#### (.*$)/gim, '<h4>$1</h4>')
                .replace(/^### (.*$)/gim, '<h3>$1</h3>')
                .replace(/^## (.*$)/gim, '<h2>$1</h2>')
                .replace(/^# (.*$)/gim, '<h1>$1</h1>')
                .replace(/^\> (.*$)/gim, '<blockquote>$1</blockquote>')
                .replace(/\*\*([^*]+)\*\*/g, '<strong>$1</strong>')
                .replace(/\*([^*]+)\*/g, '<em>$1</em>')
                .replace(/```([^`]+)```/g, '<pre><code>$1</code></pre>')
                .replace(/`([^`]+)`/g, '<code>$1</code>')
                .replace(/\n\n/g, '</p><p>')
                .replace(/^/g, '<p>')
                .replace(/$/g, '</p>');
            
            return html;
        }
        
        // Removed scroll mode functions - always infinite
        
        // Toggle theme
        function toggleTheme() {
            isDarkMode = !isDarkMode;
            document.body.classList.toggle('light-mode');
            localStorage.setItem('theme', isDarkMode ? 'dark' : 'light');
            updateThemeButton();
        }
        
        // Update theme button
        function updateThemeButton() {
            const themeBtn = document.getElementById('themeToggle');
            const darkIcon = themeBtn.querySelector('.theme-icon-dark');
            const lightIcon = themeBtn.querySelector('.theme-icon-light');
            
            if (isDarkMode) {
                darkIcon.style.display = 'none';
                lightIcon.style.display = 'block';
            } else {
                darkIcon.style.display = 'block';
                lightIcon.style.display = 'none';
            }
        }
        
        // Full-text search cache
        let searchIndex = null;
        let isIndexing = false;
        
        // Build search index
        async function buildSearchIndex() {
            if (isIndexing || searchIndex) return;
            
            isIndexing = true;
            searchIndex = [];
            
            // Index all chapters
            for (const chapter of allChapters) {
                try {
                    const response = await fetch(`/manuscrito/${chapter.file}`);
                    const content = await response.text();
                    
                    searchIndex.push({
                        id: chapter.id,
                        title: chapter.title,
                        number: chapter.number,
                        content: content.toLowerCase(),
                        file: chapter.file
                    });
                } catch (error) {
                    console.error(`Error indexing ${chapter.file}:`, error);
                }
            }
            
            isIndexing = false;
            console.log('Search index built with', searchIndex.length, 'chapters');
        }
        
        // Apply search highlighting to content
        function applySearchHighlighting(html) {
            const searchTerm = document.getElementById('searchInput').value.trim();
            
            if (!searchTerm || searchTerm.length === 0) {
                // Return unmodified HTML if no search term
                return html;
            }
            
            // Create a temporary div to parse HTML
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = html;
            
            // Function to highlight text nodes
            function highlightTextNode(node) {
                if (node.nodeType === Node.TEXT_NODE) {
                    const text = node.textContent;
                    const regex = new RegExp(`(${searchTerm.replace(/[.*+?^${}()|[\]\\]/g, '\\$&')})`, 'gi');
                    
                    if (regex.test(text)) {
                        const span = document.createElement('span');
                        span.innerHTML = text.replace(regex, '<mark class="search-highlight">$1</mark>');
                        node.parentNode.replaceChild(span, node);
                    }
                } else if (node.nodeType === Node.ELEMENT_NODE && 
                          !['SCRIPT', 'STYLE', 'CODE', 'PRE'].includes(node.tagName)) {
                    // Recursively process child nodes
                    Array.from(node.childNodes).forEach(highlightTextNode);
                }
            }
            
            // Apply highlighting to all text nodes
            Array.from(tempDiv.childNodes).forEach(highlightTextNode);
            
            return tempDiv.innerHTML;
        }
        
        // Remove all highlights from content
        function removeAllHighlights() {
            const contentArea = document.getElementById('contentArea');
            const marks = contentArea.querySelectorAll('mark.search-highlight');
            
            marks.forEach(mark => {
                const parent = mark.parentNode;
                while (mark.firstChild) {
                    parent.insertBefore(mark.firstChild, mark);
                }
                parent.removeChild(mark);
            });
        }
        
        // Search chapters and content
        async function searchChapters() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase().trim();
            
            if (!searchTerm) {
                // Reset display if search is empty
                document.querySelectorAll('.chapter-item').forEach(item => {
                    item.style.display = 'block';
                    item.classList.remove('search-match');
                });
                
                // Remove all highlights from content
                removeAllHighlights();
                document.querySelectorAll('.search-results').forEach(el => el.remove());
                return;
            }
            
            // Build index if not ready
            if (!searchIndex) {
                await buildSearchIndex();
            }
            
            // Search in both titles and content with better highlighting
            const results = searchIndex.filter(chapter => chapter && chapter.content).map(chapter => {
                const titleMatch = chapter.title.toLowerCase().includes(searchTerm);
                const contentMatch = chapter.content.includes(searchTerm);
                
                if (!titleMatch && !contentMatch) return null;
                
                // Find context around the search term
                let context = '';
                if (contentMatch) {
                    const index = chapter.content.indexOf(searchTerm);
                    const start = Math.max(0, index - 100);
                    const end = Math.min(chapter.content.length, index + 100);
                    context = '...' + chapter.content.substring(start, end).replace(/\n/g, ' ') + '...';
                    
                    // Better highlight with stronger visibility
                    const regex = new RegExp(`(${searchTerm})`, 'gi');
                    context = context.replace(regex, '<mark class="search-highlight">$1</mark>');
                }
                
                // Count occurrences
                const regex = new RegExp(searchTerm, 'gi');
                const occurrences = (chapter.content.match(regex) || []).length;
                
                return {
                    chapter,
                    titleMatch,
                    contentMatch,
                    context,
                    occurrences,
                    relevance: (titleMatch ? 10 : 0) + occurrences
                };
            }).filter(r => r !== null);
            
            // Sort by relevance
            results.sort((a, b) => b.relevance - a.relevance);
            
            // Update sidebar display
            document.querySelectorAll('.chapter-item').forEach(item => {
                const chapterId = item.id.replace('chapter-', '');
                const result = results.find(r => r.chapter.id === chapterId);
                
                if (result) {
                    item.style.display = 'block';
                    item.classList.add('search-match');
                    
                    // Add occurrence count
                    let countBadge = item.querySelector('.search-count');
                    if (!countBadge) {
                        countBadge = document.createElement('span');
                        countBadge.className = 'search-count';
                        item.appendChild(countBadge);
                    }
                    countBadge.textContent = `${result.occurrences} match${result.occurrences > 1 ? 'es' : ''}`;
                    
                    // Show search preview with context
                    const preview = document.getElementById(`preview-${chapterId}`);
                    if (preview && result.context) {
                        preview.innerHTML = result.context;
                        preview.style.display = 'block';
                    }
                } else {
                    item.style.display = 'none';
                    item.classList.remove('search-match');
                    const preview = document.getElementById(`preview-${chapterId}`);
                    if (preview) {
                        preview.style.display = 'none';
                    }
                }
            });
            
            // Show search results summary
            showSearchResults(results, searchTerm);
        }
        
        // Show search results in content area
        function showSearchResults(results, searchTerm) {
            // Remove existing results
            document.querySelectorAll('.search-results').forEach(el => el.remove());
            
            if (results.length === 0) {
                const noResults = document.createElement('div');
                noResults.className = 'search-results no-results';
                noResults.innerHTML = `
                    <p>Nenhum resultado encontrado para "<strong>${searchTerm}</strong>"</p>
                `;
                document.querySelector('.sidebar-header').appendChild(noResults);
                return;
            }
            
            // Create results summary
            const resultsDiv = document.createElement('div');
            resultsDiv.className = 'search-results';
            resultsDiv.innerHTML = `
                <div class="search-summary">
                    <strong>${results.length}</strong> capítulo${results.length > 1 ? 's' : ''} 
                    com "<strong>${searchTerm}</strong>"
                    <button onclick="clearSearch()" class="clear-search"><i data-lucide="x" class="w-3 h-3" style="display: inline-block; margin-right: 4px; vertical-align: middle;"></i>Limpar</button>
                </div>
            `;
            
            document.querySelector('.sidebar-header').appendChild(resultsDiv);
        }
        
        // Clear search
        function clearSearch() {
            document.getElementById('searchInput').value = '';
            removeAllHighlights();
            searchChapters();
        }
        
        // Initialize search index when page loads
        setTimeout(buildSearchIndex, 1000);
        
        // Font size controls
        function increaseFontSize() {
            if (currentFontSize < 28) {
                currentFontSize += 2;
                applyFontSize();
            }
        }
        
        function decreaseFontSize() {
            if (currentFontSize > 12) {
                currentFontSize -= 2;
                applyFontSize();
            }
        }
        
        function applyFontSize() {
            const contentArea = document.getElementById('contentArea');
            if (contentArea) {
                // Apply to all paragraphs
                const paragraphs = contentArea.querySelectorAll('p');
                paragraphs.forEach(p => {
                    p.style.fontSize = currentFontSize + 'px';
                });
                
                // Apply to lists
                const lists = contentArea.querySelectorAll('li');
                lists.forEach(li => {
                    li.style.fontSize = currentFontSize + 'px';
                });
                
                // Apply to blockquotes
                const quotes = contentArea.querySelectorAll('blockquote');
                quotes.forEach(q => {
                    q.style.fontSize = currentFontSize + 'px';
                });
                
                // Scale headers proportionally
                const h1s = contentArea.querySelectorAll('h1');
                h1s.forEach(h => h.style.fontSize = (currentFontSize * 2.8) + 'px');
                
                const h2s = contentArea.querySelectorAll('h2');
                h2s.forEach(h => h.style.fontSize = (currentFontSize * 2) + 'px');
                
                const h3s = contentArea.querySelectorAll('h3');
                h3s.forEach(h => h.style.fontSize = (currentFontSize * 1.5) + 'px');
                
                const h4s = contentArea.querySelectorAll('h4');
                h4s.forEach(h => h.style.fontSize = (currentFontSize * 1.3) + 'px');
                
                // Save preference
                localStorage.setItem('fontSize', currentFontSize);
                
                // Update button states
                updateFontSizeButtons();
            }
        }
        
        function updateFontSizeButtons() {
            const decreaseBtn = document.querySelector('button[onclick="decreaseFontSize()"]');
            const increaseBtn = document.querySelector('button[onclick="increaseFontSize()"]');
            
            if (decreaseBtn) {
                decreaseBtn.disabled = currentFontSize <= 12;
                decreaseBtn.style.opacity = currentFontSize <= 12 ? '0.5' : '1';
            }
            
            if (increaseBtn) {
                increaseBtn.disabled = currentFontSize >= 28;
                increaseBtn.style.opacity = currentFontSize >= 28 ? '0.5' : '1';
            }
        }
        
        // Load saved font size
        const savedFontSize = localStorage.getItem('fontSize');
        if (savedFontSize) {
            currentFontSize = parseInt(savedFontSize);
            // Apply after content loads
            setTimeout(() => {
                applyFontSize();
            }, 500);
        }
        
        // Toggle sidebar on mobile
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('sidebarOverlay');
            
            sidebar.classList.toggle('open');
            overlay.classList.toggle('active');
            
            // Prevent body scroll when sidebar is open
            if (sidebar.classList.contains('open')) {
                document.body.style.overflow = 'hidden';
            } else {
                document.body.style.overflow = '';
            }
        }
        
        // Close sidebar when clicking outside on mobile
        document.addEventListener('click', (e) => {
            if (window.innerWidth <= 768) {
                const sidebar = document.getElementById('sidebar');
                const menuToggle = document.querySelector('.menu-toggle');
                
                if (!sidebar.contains(e.target) && !menuToggle.contains(e.target) && sidebar.classList.contains('open')) {
                    toggleSidebar();
                }
            }
        });
        
        // Handle window resize
        window.addEventListener('resize', () => {
            if (window.innerWidth > 768) {
                const sidebar = document.getElementById('sidebar');
                const overlay = document.getElementById('sidebarOverlay');
                
                sidebar.classList.remove('open');
                overlay.classList.remove('active');
                document.body.style.overflow = '';
            }
        });
        
        // Initialize Lucide icons with delay
        document.addEventListener('DOMContentLoaded', () => {
            // Initialize menu functionality immediately
            const menuToggle = document.querySelector('.menu-toggle');
            if (menuToggle) {
                console.log('Menu toggle button found');
                menuToggle.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    console.log('Menu button clicked');
                    toggleSidebar();
                });
            }
            
            setTimeout(() => {
                if (typeof lucide !== 'undefined') {
                    lucide.createIcons();
                    console.log('Lucide icons initialized');
                } else {
                    console.error('Lucide not loaded');
                }
            }, 100);
        });
        
        // Re-initialize icons after dynamic content loads  
        const originalAppendChapter = appendChapter;
        appendChapter = async function(...args) {
            const result = await originalAppendChapter.apply(this, args);
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }
            return result;
        };
        
        // Content Protection Functions
        function initializeContentProtection() {
            // Disable right-click
            document.addEventListener('contextmenu', (e) => {
                e.preventDefault();
                showProtectionWarning('Conteúdo protegido por direitos autorais');
                return false;
            });
            
            // Disable text selection
            document.addEventListener('selectstart', (e) => {
                e.preventDefault();
                return false;
            });
            
            // Disable copy/cut
            document.addEventListener('copy', (e) => {
                e.preventDefault();
                showProtectionWarning('Cópia não permitida');
                return false;
            });
            
            document.addEventListener('cut', (e) => {
                e.preventDefault();
                return false;
            });
            
            // Disable print
            document.addEventListener('beforeprint', (e) => {
                e.preventDefault();
                showProtectionWarning('Impressão não permitida');
                return false;
            });
            
            // Block developer tools shortcuts
            document.addEventListener('keydown', (e) => {
                if (e.keyCode === 123 || // F12
                    (e.ctrlKey && e.shiftKey && (e.keyCode === 73 || e.keyCode === 74 || e.keyCode === 67)) || // Ctrl+Shift+I/J/C
                    (e.ctrlKey && e.keyCode === 85) || // Ctrl+U
                    (e.ctrlKey && e.keyCode === 83)) { // Ctrl+S
                    e.preventDefault();
                    showProtectionWarning('Ação bloqueada');
                    return false;
                }
            });
        }
        
        function showProtectionWarning(message) {
            const existing = document.querySelector('.protection-warning');
            if (existing) existing.remove();
            
            const warning = document.createElement('div');
            warning.className = 'protection-warning';
            warning.style.cssText = `
                position: fixed;
                top: 20px;
                left: 50%;
                transform: translateX(-50%);
                background: #ef4444;
                color: white;
                padding: 12px 24px;
                border-radius: 8px;
                font-size: 14px;
                font-weight: 600;
                z-index: 10000;
                box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            `;
            warning.textContent = '🔒 ' + message;
            document.body.appendChild(warning);
            
            setTimeout(() => warning.remove(), 2500);
        }
        
        function replaceEmojisWithIcons(html) {
            const iconStyle = 'style="display:inline-block;width:1.2em;height:1.2em;vertical-align:middle;margin:0 2px;"';
            
            const replacements = {
                // Books and Learning
                '📚': `<i data-lucide="book-open" ${iconStyle}></i>`,
                '📖': `<i data-lucide="book" ${iconStyle}></i>`,
                '📕': `<i data-lucide="book" ${iconStyle}></i>`,
                '📗': `<i data-lucide="book" ${iconStyle}></i>`,
                '📘': `<i data-lucide="book" ${iconStyle}></i>`,
                '📙': `<i data-lucide="book" ${iconStyle}></i>`,
                '📓': `<i data-lucide="notebook" ${iconStyle}></i>`,
                '📔': `<i data-lucide="notebook" ${iconStyle}></i>`,
                '📒': `<i data-lucide="notebook" ${iconStyle}></i>`,
                '📑': `<i data-lucide="bookmark" ${iconStyle}></i>`,
                '🔖': `<i data-lucide="bookmark" ${iconStyle}></i>`,
                
                // Writing
                '✍️': `<i data-lucide="pen-tool" ${iconStyle}></i>`,
                '✍': `<i data-lucide="pen-tool" ${iconStyle}></i>`,
                '✏️': `<i data-lucide="pencil" ${iconStyle}></i>`,
                '✏': `<i data-lucide="pencil" ${iconStyle}></i>`,
                '🖊️': `<i data-lucide="pen" ${iconStyle}></i>`,
                '🖊': `<i data-lucide="pen" ${iconStyle}></i>`,
                '🖋️': `<i data-lucide="pen-tool" ${iconStyle}></i>`,
                '🖋': `<i data-lucide="pen-tool" ${iconStyle}></i>`,
                '📝': `<i data-lucide="file-text" ${iconStyle}></i>`,
                
                // World and Global
                '🌍': `<i data-lucide="globe" ${iconStyle}></i>`,
                '🌎': `<i data-lucide="globe-2" ${iconStyle}></i>`,
                '🌏': `<i data-lucide="globe" ${iconStyle}></i>`,
                '🌐': `<i data-lucide="globe" ${iconStyle}></i>`,
                '🗺️': `<i data-lucide="map" ${iconStyle}></i>`,
                '🗺': `<i data-lucide="map" ${iconStyle}></i>`,
                
                // Ideas and Innovation
                '💡': `<i data-lucide="lightbulb" ${iconStyle}></i>`,
                '🔦': `<i data-lucide="flashlight" ${iconStyle}></i>`,
                '💭': `<i data-lucide="message-circle" ${iconStyle}></i>`,
                '🗨️': `<i data-lucide="message-square" ${iconStyle}></i>`,
                '💬': `<i data-lucide="message-circle" ${iconStyle}></i>`,
                '🗯️': `<i data-lucide="message-square" ${iconStyle}></i>`,
                
                // Speed and Progress
                '🚀': `<i data-lucide="rocket" ${iconStyle}></i>`,
                '🛸': `<i data-lucide="circle" ${iconStyle}></i>`,
                '⚡': `<i data-lucide="zap" ${iconStyle}></i>`,
                '⚡️': `<i data-lucide="zap" ${iconStyle}></i>`,
                '✨': `<i data-lucide="sparkles" ${iconStyle}></i>`,
                '🌟': `<i data-lucide="star" ${iconStyle}></i>`,
                '⭐': `<i data-lucide="star" ${iconStyle}></i>`,
                '⭐️': `<i data-lucide="star" ${iconStyle}></i>`,
                '🌠': `<i data-lucide="sparkle" ${iconStyle}></i>`,
                
                // Goals and Achievement
                '🎯': `<i data-lucide="target" ${iconStyle}></i>`,
                '🏆': `<i data-lucide="trophy" ${iconStyle}></i>`,
                '🥇': `<i data-lucide="medal" ${iconStyle}></i>`,
                '🥈': `<i data-lucide="medal" ${iconStyle}></i>`,
                '🥉': `<i data-lucide="medal" ${iconStyle}></i>`,
                '🏅': `<i data-lucide="award" ${iconStyle}></i>`,
                '🎖️': `<i data-lucide="award" ${iconStyle}></i>`,
                '🎖': `<i data-lucide="award" ${iconStyle}></i>`,
                
                // People and Teams
                '👥': `<i data-lucide="users" ${iconStyle}></i>`,
                '👤': `<i data-lucide="user" ${iconStyle}></i>`,
                '👨': `<i data-lucide="user" ${iconStyle}></i>`,
                '👩': `<i data-lucide="user" ${iconStyle}></i>`,
                '👨‍💼': `<i data-lucide="briefcase" ${iconStyle}></i>`,
                '👩‍💼': `<i data-lucide="briefcase" ${iconStyle}></i>`,
                '🤝': `<i data-lucide="handshake" ${iconStyle}></i>`,
                '🤖': `<i data-lucide="bot" ${iconStyle}></i>`,
                
                // Value and Quality
                '💎': `<i data-lucide="gem" ${iconStyle}></i>`,
                '💰': `<i data-lucide="coins" ${iconStyle}></i>`,
                '💸': `<i data-lucide="banknote" ${iconStyle}></i>`,
                '💵': `<i data-lucide="dollar-sign" ${iconStyle}></i>`,
                '💴': `<i data-lucide="currency" ${iconStyle}></i>`,
                '💶': `<i data-lucide="euro" ${iconStyle}></i>`,
                '💷': `<i data-lucide="pound-sterling" ${iconStyle}></i>`,
                
                // Tools and Settings
                '⚙️': `<i data-lucide="settings" ${iconStyle}></i>`,
                '⚙': `<i data-lucide="settings" ${iconStyle}></i>`,
                '🔧': `<i data-lucide="wrench" ${iconStyle}></i>`,
                '🔨': `<i data-lucide="hammer" ${iconStyle}></i>`,
                '🛠️': `<i data-lucide="wrench" ${iconStyle}></i>`,
                '🛠': `<i data-lucide="wrench" ${iconStyle}></i>`,
                '⛏️': `<i data-lucide="pickaxe" ${iconStyle}></i>`,
                '⛏': `<i data-lucide="pickaxe" ${iconStyle}></i>`,
                
                // Security and Protection
                '🔒': `<i data-lucide="lock" ${iconStyle}></i>`,
                '🔓': `<i data-lucide="unlock" ${iconStyle}></i>`,
                '🔐': `<i data-lucide="lock" ${iconStyle}></i>`,
                '🔑': `<i data-lucide="key" ${iconStyle}></i>`,
                '🗝️': `<i data-lucide="key" ${iconStyle}></i>`,
                '🗝': `<i data-lucide="key" ${iconStyle}></i>`,
                '🛡️': `<i data-lucide="shield" ${iconStyle}></i>`,
                '🛡': `<i data-lucide="shield" ${iconStyle}></i>`,
                
                // Time
                '⏰': `<i data-lucide="alarm-clock" ${iconStyle}></i>`,
                '⏱️': `<i data-lucide="timer" ${iconStyle}></i>`,
                '⏱': `<i data-lucide="timer" ${iconStyle}></i>`,
                '⏲️': `<i data-lucide="timer" ${iconStyle}></i>`,
                '⏲': `<i data-lucide="timer" ${iconStyle}></i>`,
                '🕐': `<i data-lucide="clock" ${iconStyle}></i>`,
                '🕑': `<i data-lucide="clock-1" ${iconStyle}></i>`,
                '🕒': `<i data-lucide="clock-2" ${iconStyle}></i>`,
                '📅': `<i data-lucide="calendar" ${iconStyle}></i>`,
                '📆': `<i data-lucide="calendar" ${iconStyle}></i>`,
                '🗓️': `<i data-lucide="calendar-days" ${iconStyle}></i>`,
                '🗓': `<i data-lucide="calendar-days" ${iconStyle}></i>`,
                
                // Check and Cross
                '✅': `<i data-lucide="check-circle" ${iconStyle}></i>`,
                '✔️': `<i data-lucide="check" ${iconStyle}></i>`,
                '✔': `<i data-lucide="check" ${iconStyle}></i>`,
                '✓': `<i data-lucide="check" ${iconStyle}></i>`,
                '❌': `<i data-lucide="x-circle" ${iconStyle}></i>`,
                '❎': `<i data-lucide="x-square" ${iconStyle}></i>`,
                '✖️': `<i data-lucide="x" ${iconStyle}></i>`,
                '✖': `<i data-lucide="x" ${iconStyle}></i>`,
                '✗': `<i data-lucide="x" ${iconStyle}></i>`,
                
                // Warnings and Info
                '⚠️': `<i data-lucide="alert-triangle" ${iconStyle}></i>`,
                '⚠': `<i data-lucide="alert-triangle" ${iconStyle}></i>`,
                '⛔': `<i data-lucide="ban" ${iconStyle}></i>`,
                '🚫': `<i data-lucide="ban" ${iconStyle}></i>`,
                '❗': `<i data-lucide="alert-circle" ${iconStyle}></i>`,
                '❗️': `<i data-lucide="alert-circle" ${iconStyle}></i>`,
                '❓': `<i data-lucide="help-circle" ${iconStyle}></i>`,
                '❔': `<i data-lucide="help-circle" ${iconStyle}></i>`,
                'ℹ️': `<i data-lucide="info" ${iconStyle}></i>`,
                'ℹ': `<i data-lucide="info" ${iconStyle}></i>`,
                
                // Charts and Data
                '📊': `<i data-lucide="bar-chart-2" ${iconStyle}></i>`,
                '📈': `<i data-lucide="trending-up" ${iconStyle}></i>`,
                '📉': `<i data-lucide="trending-down" ${iconStyle}></i>`,
                '📋': `<i data-lucide="clipboard" ${iconStyle}></i>`,
                '📌': `<i data-lucide="pin" ${iconStyle}></i>`,
                '📍': `<i data-lucide="map-pin" ${iconStyle}></i>`,
                '📎': `<i data-lucide="paperclip" ${iconStyle}></i>`,
                
                // Technology
                '💻': `<i data-lucide="laptop" ${iconStyle}></i>`,
                '🖥️': `<i data-lucide="monitor" ${iconStyle}></i>`,
                '🖥': `<i data-lucide="monitor" ${iconStyle}></i>`,
                '📱': `<i data-lucide="smartphone" ${iconStyle}></i>`,
                '☁️': `<i data-lucide="cloud" ${iconStyle}></i>`,
                '☁': `<i data-lucide="cloud" ${iconStyle}></i>`,
                '💾': `<i data-lucide="save" ${iconStyle}></i>`,
                '💿': `<i data-lucide="disc" ${iconStyle}></i>`,
                '📀': `<i data-lucide="disc-2" ${iconStyle}></i>`,
                
                // Communication
                '📧': `<i data-lucide="mail" ${iconStyle}></i>`,
                '📨': `<i data-lucide="mail" ${iconStyle}></i>`,
                '📩': `<i data-lucide="mail" ${iconStyle}></i>`,
                '📤': `<i data-lucide="send" ${iconStyle}></i>`,
                '📥': `<i data-lucide="inbox" ${iconStyle}></i>`,
                '📮': `<i data-lucide="mail" ${iconStyle}></i>`,
                '📬': `<i data-lucide="mailbox" ${iconStyle}></i>`,
                '📭': `<i data-lucide="mail" ${iconStyle}></i>`,
                '📞': `<i data-lucide="phone" ${iconStyle}></i>`,
                '☎️': `<i data-lucide="phone" ${iconStyle}></i>`,
                '☎': `<i data-lucide="phone" ${iconStyle}></i>`,
                '📟': `<i data-lucide="smartphone" ${iconStyle}></i>`,
                '📠': `<i data-lucide="printer" ${iconStyle}></i>`,
                
                // Folders and Files
                '📁': `<i data-lucide="folder-open" ${iconStyle}></i>`,
                '📂': `<i data-lucide="folder-open" ${iconStyle}></i>`,
                '🗂️': `<i data-lucide="folders" ${iconStyle}></i>`,
                '🗂': `<i data-lucide="folders" ${iconStyle}></i>`,
                '📃': `<i data-lucide="file" ${iconStyle}></i>`,
                '📄': `<i data-lucide="file-text" ${iconStyle}></i>`,
                '🗃️': `<i data-lucide="archive" ${iconStyle}></i>`,
                '🗃': `<i data-lucide="archive" ${iconStyle}></i>`,
                '🗄️': `<i data-lucide="archive" ${iconStyle}></i>`,
                '🗄': `<i data-lucide="archive" ${iconStyle}></i>`,
                
                // Art and Creation
                '🎨': `<i data-lucide="palette" ${iconStyle}></i>`,
                '🖌️': `<i data-lucide="paintbrush" ${iconStyle}></i>`,
                '🖌': `<i data-lucide="paintbrush" ${iconStyle}></i>`,
                '🖍️': `<i data-lucide="pen-tool" ${iconStyle}></i>`,
                '🖍': `<i data-lucide="pen-tool" ${iconStyle}></i>`,
                
                // Media
                '🎵': `<i data-lucide="music" ${iconStyle}></i>`,
                '🎶': `<i data-lucide="music-2" ${iconStyle}></i>`,
                '🎼': `<i data-lucide="music" ${iconStyle}></i>`,
                '🎤': `<i data-lucide="mic" ${iconStyle}></i>`,
                '🎧': `<i data-lucide="headphones" ${iconStyle}></i>`,
                '🎬': `<i data-lucide="clapperboard" ${iconStyle}></i>`,
                '🎥': `<i data-lucide="video" ${iconStyle}></i>`,
                '📹': `<i data-lucide="video" ${iconStyle}></i>`,
                '📷': `<i data-lucide="camera" ${iconStyle}></i>`,
                '📸': `<i data-lucide="camera" ${iconStyle}></i>`,
                '🔊': `<i data-lucide="volume-2" ${iconStyle}></i>`,
                '🔇': `<i data-lucide="volume-x" ${iconStyle}></i>`,
                '🔈': `<i data-lucide="volume" ${iconStyle}></i>`,
                '🔉': `<i data-lucide="volume-1" ${iconStyle}></i>`,
                
                // Arrows and Direction
                '➡️': `<i data-lucide="arrow-right" ${iconStyle}></i>`,
                '➡': `<i data-lucide="arrow-right" ${iconStyle}></i>`,
                '⬅️': `<i data-lucide="arrow-left" ${iconStyle}></i>`,
                '⬅': `<i data-lucide="arrow-left" ${iconStyle}></i>`,
                '⬆️': `<i data-lucide="arrow-up" ${iconStyle}></i>`,
                '⬆': `<i data-lucide="arrow-up" ${iconStyle}></i>`,
                '⬇️': `<i data-lucide="arrow-down" ${iconStyle}></i>`,
                '⬇': `<i data-lucide="arrow-down" ${iconStyle}></i>`,
                '↗️': `<i data-lucide="arrow-up-right" ${iconStyle}></i>`,
                '↗': `<i data-lucide="arrow-up-right" ${iconStyle}></i>`,
                '↘️': `<i data-lucide="arrow-down-right" ${iconStyle}></i>`,
                '↘': `<i data-lucide="arrow-down-right" ${iconStyle}></i>`,
                '↙️': `<i data-lucide="arrow-down-left" ${iconStyle}></i>`,
                '↙': `<i data-lucide="arrow-down-left" ${iconStyle}></i>`,
                '↖️': `<i data-lucide="arrow-up-left" ${iconStyle}></i>`,
                '↖': `<i data-lucide="arrow-up-left" ${iconStyle}></i>`,
                '🔄': `<i data-lucide="refresh-cw" ${iconStyle}></i>`,
                '🔃': `<i data-lucide="refresh-ccw" ${iconStyle}></i>`,
                '🔁': `<i data-lucide="repeat" ${iconStyle}></i>`,
                '🔂': `<i data-lucide="repeat-1" ${iconStyle}></i>`,
                
                // Search and View
                '🔍': `<i data-lucide="search" ${iconStyle}></i>`,
                '🔎': `<i data-lucide="search" ${iconStyle}></i>`,
                '🔬': `<i data-lucide="microscope" ${iconStyle}></i>`,
                '🔭': `<i data-lucide="telescope" ${iconStyle}></i>`,
                '👁️': `<i data-lucide="eye" ${iconStyle}></i>`,
                '👁': `<i data-lucide="eye" ${iconStyle}></i>`,
                
                // Buildings and Places
                '🏠': `<i data-lucide="home" ${iconStyle}></i>`,
                '🏡': `<i data-lucide="home" ${iconStyle}></i>`,
                '🏢': `<i data-lucide="building" ${iconStyle}></i>`,
                '🏣': `<i data-lucide="building-2" ${iconStyle}></i>`,
                '🏤': `<i data-lucide="building" ${iconStyle}></i>`,
                '🏥': `<i data-lucide="hospital" ${iconStyle}></i>`,
                '🏦': `<i data-lucide="landmark" ${iconStyle}></i>`,
                '🏧': `<i data-lucide="credit-card" ${iconStyle}></i>`,
                '🏨': `<i data-lucide="hotel" ${iconStyle}></i>`,
                '🏩': `<i data-lucide="heart" ${iconStyle}></i>`,
                '🏪': `<i data-lucide="store" ${iconStyle}></i>`,
                '🏫': `<i data-lucide="school" ${iconStyle}></i>`,
                '🏬': `<i data-lucide="building" ${iconStyle}></i>`,
                '🏭': `<i data-lucide="factory" ${iconStyle}></i>`,
                
                // Transportation
                '🚗': `<i data-lucide="car" ${iconStyle}></i>`,
                '🚕': `<i data-lucide="car" ${iconStyle}></i>`,
                '🚙': `<i data-lucide="truck" ${iconStyle}></i>`,
                '🚌': `<i data-lucide="bus" ${iconStyle}></i>`,
                '🚎': `<i data-lucide="bus" ${iconStyle}></i>`,
                '🏎️': `<i data-lucide="zap" ${iconStyle}></i>`,
                '🏎': `<i data-lucide="zap" ${iconStyle}></i>`,
                '🚓': `<i data-lucide="siren" ${iconStyle}></i>`,
                '🚑': `<i data-lucide="siren" ${iconStyle}></i>`,
                '🚒': `<i data-lucide="truck" ${iconStyle}></i>`,
                '✈️': `<i data-lucide="plane" ${iconStyle}></i>`,
                '✈': `<i data-lucide="plane" ${iconStyle}></i>`,
                '🚁': `<i data-lucide="plane" ${iconStyle}></i>`,
                '🚂': `<i data-lucide="train" ${iconStyle}></i>`,
                '🚃': `<i data-lucide="train" ${iconStyle}></i>`,
                '🚄': `<i data-lucide="train" ${iconStyle}></i>`,
                '🚅': `<i data-lucide="train" ${iconStyle}></i>`,
                '🚆': `<i data-lucide="train" ${iconStyle}></i>`,
                '🚇': `<i data-lucide="train" ${iconStyle}></i>`,
                '🚈': `<i data-lucide="train" ${iconStyle}></i>`,
                '🚉': `<i data-lucide="train" ${iconStyle}></i>`,
                '🚊': `<i data-lucide="train" ${iconStyle}></i>`,
                '🚝': `<i data-lucide="train" ${iconStyle}></i>`,
                '🚞': `<i data-lucide="train" ${iconStyle}></i>`,
                '🚋': `<i data-lucide="train" ${iconStyle}></i>`,
                '🚲': `<i data-lucide="bike" ${iconStyle}></i>`,
                
                // Nature
                '🌲': `<i data-lucide="tree-pine" ${iconStyle}></i>`,
                '🌳': `<i data-lucide="tree-deciduous" ${iconStyle}></i>`,
                '🌴': `<i data-lucide="palmtree" ${iconStyle}></i>`,
                '🌵': `<i data-lucide="cactus" ${iconStyle}></i>`,
                '🌾': `<i data-lucide="wheat" ${iconStyle}></i>`,
                '🌿': `<i data-lucide="leaf" ${iconStyle}></i>`,
                '☘️': `<i data-lucide="clover" ${iconStyle}></i>`,
                '☘': `<i data-lucide="clover" ${iconStyle}></i>`,
                '🍀': `<i data-lucide="clover" ${iconStyle}></i>`,
                '🍁': `<i data-lucide="leaf" ${iconStyle}></i>`,
                '🍂': `<i data-lucide="leaf" ${iconStyle}></i>`,
                '🍃': `<i data-lucide="leaf" ${iconStyle}></i>`,
                '🌺': `<i data-lucide="flower" ${iconStyle}></i>`,
                '🌻': `<i data-lucide="flower-2" ${iconStyle}></i>`,
                '🌹': `<i data-lucide="flower" ${iconStyle}></i>`,
                '🌷': `<i data-lucide="flower" ${iconStyle}></i>`,
                '🌼': `<i data-lucide="flower" ${iconStyle}></i>`,
                '🌸': `<i data-lucide="cherry" ${iconStyle}></i>`,
                '⛰️': `<i data-lucide="mountain" ${iconStyle}></i>`,
                '⛰': `<i data-lucide="mountain" ${iconStyle}></i>`,
                '🏔️': `<i data-lucide="mountain-snow" ${iconStyle}></i>`,
                '🏔': `<i data-lucide="mountain-snow" ${iconStyle}></i>`,
                '🌋': `<i data-lucide="flame" ${iconStyle}></i>`,
                
                // Weather
                '☀️': `<i data-lucide="sun" ${iconStyle}></i>`,
                '☀': `<i data-lucide="sun" ${iconStyle}></i>`,
                '🌤️': `<i data-lucide="cloud-sun" ${iconStyle}></i>`,
                '🌤': `<i data-lucide="cloud-sun" ${iconStyle}></i>`,
                '⛅': `<i data-lucide="cloud-sun" ${iconStyle}></i>`,
                '⛅️': `<i data-lucide="cloud-sun" ${iconStyle}></i>`,
                '🌥️': `<i data-lucide="cloud" ${iconStyle}></i>`,
                '🌥': `<i data-lucide="cloud" ${iconStyle}></i>`,
                '☁️': `<i data-lucide="cloud" ${iconStyle}></i>`,
                '☁': `<i data-lucide="cloud" ${iconStyle}></i>`,
                '🌦️': `<i data-lucide="cloud-rain" ${iconStyle}></i>`,
                '🌦': `<i data-lucide="cloud-rain" ${iconStyle}></i>`,
                '🌧️': `<i data-lucide="cloud-rain" ${iconStyle}></i>`,
                '🌧': `<i data-lucide="cloud-rain" ${iconStyle}></i>`,
                '⛈️': `<i data-lucide="cloud-lightning" ${iconStyle}></i>`,
                '⛈': `<i data-lucide="cloud-lightning" ${iconStyle}></i>`,
                '🌩️': `<i data-lucide="cloud-lightning" ${iconStyle}></i>`,
                '🌩': `<i data-lucide="cloud-lightning" ${iconStyle}></i>`,
                '🌨️': `<i data-lucide="cloud-snow" ${iconStyle}></i>`,
                '🌨': `<i data-lucide="cloud-snow" ${iconStyle}></i>`,
                '❄️': `<i data-lucide="snowflake" ${iconStyle}></i>`,
                '❄': `<i data-lucide="snowflake" ${iconStyle}></i>`,
                '☃️': `<i data-lucide="snowflake" ${iconStyle}></i>`,
                '☃': `<i data-lucide="snowflake" ${iconStyle}></i>`,
                '⛄': `<i data-lucide="snowflake" ${iconStyle}></i>`,
                '🌬️': `<i data-lucide="wind" ${iconStyle}></i>`,
                '🌬': `<i data-lucide="wind" ${iconStyle}></i>`,
                '💨': `<i data-lucide="wind" ${iconStyle}></i>`,
                '🌪️': `<i data-lucide="tornado" ${iconStyle}></i>`,
                '🌪': `<i data-lucide="tornado" ${iconStyle}></i>`,
                '🌈': `<i data-lucide="rainbow" ${iconStyle}></i>`,
                '☂️': `<i data-lucide="umbrella" ${iconStyle}></i>`,
                '☂': `<i data-lucide="umbrella" ${iconStyle}></i>`,
                '☔': `<i data-lucide="umbrella" ${iconStyle}></i>`,
                '⚡': `<i data-lucide="zap" ${iconStyle}></i>`,
                '⚡️': `<i data-lucide="zap" ${iconStyle}></i>`,
                
                // Food
                '🍏': `<i data-lucide="apple" ${iconStyle}></i>`,
                '🍎': `<i data-lucide="apple" ${iconStyle}></i>`,
                '🍊': `<i data-lucide="citrus" ${iconStyle}></i>`,
                '🍋': `<i data-lucide="citrus" ${iconStyle}></i>`,
                '🍌': `<i data-lucide="banana" ${iconStyle}></i>`,
                '🍉': `<i data-lucide="slice" ${iconStyle}></i>`,
                '🍇': `<i data-lucide="grape" ${iconStyle}></i>`,
                '🍓': `<i data-lucide="cherry" ${iconStyle}></i>`,
                '🍈': `<i data-lucide="apple" ${iconStyle}></i>`,
                '🍒': `<i data-lucide="cherry" ${iconStyle}></i>`,
                '🍑': `<i data-lucide="apple" ${iconStyle}></i>`,
                '🥭': `<i data-lucide="apple" ${iconStyle}></i>`,
                '🍍': `<i data-lucide="pine-cone" ${iconStyle}></i>`,
                '🥥': `<i data-lucide="nut" ${iconStyle}></i>`,
                '🥝': `<i data-lucide="circle" ${iconStyle}></i>`,
                '🍅': `<i data-lucide="apple" ${iconStyle}></i>`,
                '🥑': `<i data-lucide="egg" ${iconStyle}></i>`,
                '🥦': `<i data-lucide="tree-deciduous" ${iconStyle}></i>`,
                '🥒': `<i data-lucide="zucchini" ${iconStyle}></i>`,
                '🌶️': `<i data-lucide="pepper" ${iconStyle}></i>`,
                '🌶': `<i data-lucide="pepper" ${iconStyle}></i>`,
                '🌽': `<i data-lucide="corn" ${iconStyle}></i>`,
                '🥕': `<i data-lucide="carrot" ${iconStyle}></i>`,
                '🥔': `<i data-lucide="potato" ${iconStyle}></i>`,
                '🍠': `<i data-lucide="potato" ${iconStyle}></i>`,
                '🥐': `<i data-lucide="croissant" ${iconStyle}></i>`,
                '🍞': `<i data-lucide="sandwich" ${iconStyle}></i>`,
                '🥖': `<i data-lucide="sandwich" ${iconStyle}></i>`,
                '🥨': `<i data-lucide="donut" ${iconStyle}></i>`,
                '🧀': `<i data-lucide="cheese" ${iconStyle}></i>`,
                '🍖': `<i data-lucide="drumstick" ${iconStyle}></i>`,
                '🍗': `<i data-lucide="drumstick" ${iconStyle}></i>`,
                '🥩': `<i data-lucide="beef" ${iconStyle}></i>`,
                '🥓': `<i data-lucide="bacon" ${iconStyle}></i>`,
                '🍔': `<i data-lucide="hamburger" ${iconStyle}></i>`,
                '🍟': `<i data-lucide="french-fries" ${iconStyle}></i>`,
                '🍕': `<i data-lucide="pizza" ${iconStyle}></i>`,
                '🌭': `<i data-lucide="hot-dog" ${iconStyle}></i>`,
                '🥪': `<i data-lucide="sandwich" ${iconStyle}></i>`,
                '🌮': `<i data-lucide="taco" ${iconStyle}></i>`,
                '🌯': `<i data-lucide="burrito" ${iconStyle}></i>`,
                '🥗': `<i data-lucide="salad" ${iconStyle}></i>`,
                '🥘': `<i data-lucide="soup" ${iconStyle}></i>`,
                '🍝': `<i data-lucide="utensils" ${iconStyle}></i>`,
                '🍜': `<i data-lucide="soup" ${iconStyle}></i>`,
                '🍲': `<i data-lucide="soup" ${iconStyle}></i>`,
                '🍛': `<i data-lucide="utensils" ${iconStyle}></i>`,
                '🍣': `<i data-lucide="fish" ${iconStyle}></i>`,
                '🍱': `<i data-lucide="package" ${iconStyle}></i>`,
                '🥟': `<i data-lucide="circle" ${iconStyle}></i>`,
                '🍤': `<i data-lucide="fish" ${iconStyle}></i>`,
                '🍙': `<i data-lucide="circle" ${iconStyle}></i>`,
                '🍚': `<i data-lucide="circle" ${iconStyle}></i>`,
                '🍘': `<i data-lucide="circle" ${iconStyle}></i>`,
                '🍥': `<i data-lucide="circle" ${iconStyle}></i>`,
                '🥠': `<i data-lucide="cookie" ${iconStyle}></i>`,
                '🥮': `<i data-lucide="circle" ${iconStyle}></i>`,
                '🍢': `<i data-lucide="candy" ${iconStyle}></i>`,
                '🍡': `<i data-lucide="candy" ${iconStyle}></i>`,
                '🍧': `<i data-lucide="ice-cream" ${iconStyle}></i>`,
                '🍨': `<i data-lucide="ice-cream" ${iconStyle}></i>`,
                '🍦': `<i data-lucide="ice-cream-cone" ${iconStyle}></i>`,
                '🥧': `<i data-lucide="pie-chart" ${iconStyle}></i>`,
                '🧁': `<i data-lucide="cake" ${iconStyle}></i>`,
                '🍰': `<i data-lucide="cake-slice" ${iconStyle}></i>`,
                '🎂': `<i data-lucide="cake" ${iconStyle}></i>`,
                '🍮': `<i data-lucide="cup-soda" ${iconStyle}></i>`,
                '🍭': `<i data-lucide="lollipop" ${iconStyle}></i>`,
                '🍬': `<i data-lucide="candy" ${iconStyle}></i>`,
                '🍫': `<i data-lucide="candy" ${iconStyle}></i>`,
                '🍿': `<i data-lucide="popcorn" ${iconStyle}></i>`,
                '🍩': `<i data-lucide="donut" ${iconStyle}></i>`,
                '🍪': `<i data-lucide="cookie" ${iconStyle}></i>`,
                '🌰': `<i data-lucide="nut" ${iconStyle}></i>`,
                '🥜': `<i data-lucide="nut" ${iconStyle}></i>`,
                '☕': `<i data-lucide="coffee" ${iconStyle}></i>`,
                '☕️': `<i data-lucide="coffee" ${iconStyle}></i>`,
                '🍵': `<i data-lucide="coffee" ${iconStyle}></i>`,
                '🥤': `<i data-lucide="cup-soda" ${iconStyle}></i>`,
                '🍶': `<i data-lucide="milk" ${iconStyle}></i>`,
                '🍺': `<i data-lucide="beer" ${iconStyle}></i>`,
                '🍻': `<i data-lucide="beer" ${iconStyle}></i>`,
                '🥂': `<i data-lucide="glass-water" ${iconStyle}></i>`,
                '🍷': `<i data-lucide="wine" ${iconStyle}></i>`,
                '🥃': `<i data-lucide="glass-water" ${iconStyle}></i>`,
                '🍸': `<i data-lucide="martini" ${iconStyle}></i>`,
                '🍹': `<i data-lucide="glass-water" ${iconStyle}></i>`,
                '🍾': `<i data-lucide="wine" ${iconStyle}></i>`,
                '🥄': `<i data-lucide="utensils" ${iconStyle}></i>`,
                '🍴': `<i data-lucide="utensils" ${iconStyle}></i>`,
                '🍽️': `<i data-lucide="utensils" ${iconStyle}></i>`,
                '🍽': `<i data-lucide="utensils" ${iconStyle}></i>`,
                '🥢': `<i data-lucide="utensils" ${iconStyle}></i>`,
                '🥡': `<i data-lucide="package" ${iconStyle}></i>`,
                
                // Sports
                '⚽': `<i data-lucide="circle" ${iconStyle}></i>`,
                '🏀': `<i data-lucide="circle" ${iconStyle}></i>`,
                '🏈': `<i data-lucide="rugby" ${iconStyle}></i>`,
                '⚾': `<i data-lucide="circle" ${iconStyle}></i>`,
                '🥎': `<i data-lucide="circle" ${iconStyle}></i>`,
                '🏐': `<i data-lucide="circle" ${iconStyle}></i>`,
                '🏉': `<i data-lucide="rugby" ${iconStyle}></i>`,
                '🎾': `<i data-lucide="circle" ${iconStyle}></i>`,
                '🥏': `<i data-lucide="disc" ${iconStyle}></i>`,
                '🎳': `<i data-lucide="bowling" ${iconStyle}></i>`,
                '🏏': `<i data-lucide="cricket" ${iconStyle}></i>`,
                '🏑': `<i data-lucide="hockey" ${iconStyle}></i>`,
                '🏒': `<i data-lucide="hockey" ${iconStyle}></i>`,
                '🥍': `<i data-lucide="net" ${iconStyle}></i>`,
                '🏓': `<i data-lucide="table-tennis" ${iconStyle}></i>`,
                '🏸': `<i data-lucide="badminton" ${iconStyle}></i>`,
                '🥊': `<i data-lucide="square" ${iconStyle}></i>`,
                '🥋': `<i data-lucide="shirt" ${iconStyle}></i>`,
                '🥅': `<i data-lucide="goal" ${iconStyle}></i>`,
                '⛳': `<i data-lucide="flag" ${iconStyle}></i>`,
                '⛸️': `<i data-lucide="snowflake" ${iconStyle}></i>`,
                '⛸': `<i data-lucide="snowflake" ${iconStyle}></i>`,
                '🎣': `<i data-lucide="fish" ${iconStyle}></i>`,
                '🎽': `<i data-lucide="shirt" ${iconStyle}></i>`,
                '🎿': `<i data-lucide="mountain-snow" ${iconStyle}></i>`,
                '🛷': `<i data-lucide="sled" ${iconStyle}></i>`,
                '🥌': `<i data-lucide="circle" ${iconStyle}></i>`,
                '🎯': `<i data-lucide="target" ${iconStyle}></i>`,
                '🎱': `<i data-lucide="circle" ${iconStyle}></i>`,
                
                // Games
                '🎮': `<i data-lucide="gamepad-2" ${iconStyle}></i>`,
                '🕹️': `<i data-lucide="joystick" ${iconStyle}></i>`,
                '🕹': `<i data-lucide="joystick" ${iconStyle}></i>`,
                '🎲': `<i data-lucide="dices" ${iconStyle}></i>`,
                '♠️': `<i data-lucide="spade" ${iconStyle}></i>`,
                '♠': `<i data-lucide="spade" ${iconStyle}></i>`,
                '♥️': `<i data-lucide="heart" ${iconStyle}></i>`,
                '♥': `<i data-lucide="heart" ${iconStyle}></i>`,
                '♦️': `<i data-lucide="diamond" ${iconStyle}></i>`,
                '♦': `<i data-lucide="diamond" ${iconStyle}></i>`,
                '♣️': `<i data-lucide="club" ${iconStyle}></i>`,
                '♣': `<i data-lucide="club" ${iconStyle}></i>`,
                '♟️': `<i data-lucide="crown" ${iconStyle}></i>`,
                '♟': `<i data-lucide="crown" ${iconStyle}></i>`,
                '🃏': `<i data-lucide="square" ${iconStyle}></i>`,
                '🀄': `<i data-lucide="square" ${iconStyle}></i>`,
                '🎴': `<i data-lucide="square" ${iconStyle}></i>`,
                
                // Misc Objects
                '🔔': `<i data-lucide="bell" ${iconStyle}></i>`,
                '🔕': `<i data-lucide="bell-off" ${iconStyle}></i>`,
                '🎼': `<i data-lucide="music" ${iconStyle}></i>`,
                '🎵': `<i data-lucide="music" ${iconStyle}></i>`,
                '🎶': `<i data-lucide="music-2" ${iconStyle}></i>`,
                '🎙️': `<i data-lucide="mic" ${iconStyle}></i>`,
                '🎙': `<i data-lucide="mic" ${iconStyle}></i>`,
                '🎚️': `<i data-lucide="sliders-horizontal" ${iconStyle}></i>`,
                '🎚': `<i data-lucide="sliders-horizontal" ${iconStyle}></i>`,
                '🎛️': `<i data-lucide="sliders" ${iconStyle}></i>`,
                '🎛': `<i data-lucide="sliders" ${iconStyle}></i>`,
                '📻': `<i data-lucide="radio" ${iconStyle}></i>`,
                '📺': `<i data-lucide="tv" ${iconStyle}></i>`,
                '📼': `<i data-lucide="cassette-tape" ${iconStyle}></i>`,
                
                // Health
                '💊': `<i data-lucide="pill" ${iconStyle}></i>`,
                '💉': `<i data-lucide="syringe" ${iconStyle}></i>`,
                '🩺': `<i data-lucide="stethoscope" ${iconStyle}></i>`,
                '🩹': `<i data-lucide="band-aid" ${iconStyle}></i>`,
                '🩼': `<i data-lucide="accessibility" ${iconStyle}></i>`,
                '🦴': `<i data-lucide="bone" ${iconStyle}></i>`,
                '🦷': `<i data-lucide="circle" ${iconStyle}></i>`,
                '🦾': `<i data-lucide="cpu" ${iconStyle}></i>`,
                '🦿': `<i data-lucide="cpu" ${iconStyle}></i>`,
                '🦽': `<i data-lucide="accessibility" ${iconStyle}></i>`,
                '🦼': `<i data-lucide="accessibility" ${iconStyle}></i>`,
                '🩴': `<i data-lucide="footprints" ${iconStyle}></i>`,
                '👣': `<i data-lucide="footprints" ${iconStyle}></i>`,
                '🧠': `<i data-lucide="brain" ${iconStyle}></i>`,
                '🫀': `<i data-lucide="heart" ${iconStyle}></i>`,
                '🫁': `<i data-lucide="wind" ${iconStyle}></i>`,
                '🦶': `<i data-lucide="footprints" ${iconStyle}></i>`,
                '🦵': `<i data-lucide="accessibility" ${iconStyle}></i>`,
                '💪': `<i data-lucide="dumbbell" ${iconStyle}></i>`,
                '👂': `<i data-lucide="ear" ${iconStyle}></i>`,
                '👃': `<i data-lucide="user" ${iconStyle}></i>`,
                '👄': `<i data-lucide="smile" ${iconStyle}></i>`,
                '🦰': `<i data-lucide="user" ${iconStyle}></i>`,
                '🦱': `<i data-lucide="user" ${iconStyle}></i>`,
                '🦳': `<i data-lucide="user" ${iconStyle}></i>`,
                '🦲': `<i data-lucide="user" ${iconStyle}></i>`,
                
                // Heart Emotions
                '❤️': `<i data-lucide="heart" ${iconStyle}></i>`,
                '❤': `<i data-lucide="heart" ${iconStyle}></i>`,
                '🧡': `<i data-lucide="heart" ${iconStyle}></i>`,
                '💛': `<i data-lucide="heart" ${iconStyle}></i>`,
                '💚': `<i data-lucide="heart" ${iconStyle}></i>`,
                '💙': `<i data-lucide="heart" ${iconStyle}></i>`,
                '💜': `<i data-lucide="heart" ${iconStyle}></i>`,
                '🖤': `<i data-lucide="heart" ${iconStyle}></i>`,
                '🤍': `<i data-lucide="heart" ${iconStyle}></i>`,
                '🤎': `<i data-lucide="heart" ${iconStyle}></i>`,
                '💔': `<i data-lucide="heart-crack" ${iconStyle}></i>`,
                '❣️': `<i data-lucide="heart" ${iconStyle}></i>`,
                '❣': `<i data-lucide="heart" ${iconStyle}></i>`,
                '💕': `<i data-lucide="heart" ${iconStyle}></i>`,
                '💞': `<i data-lucide="heart" ${iconStyle}></i>`,
                '💓': `<i data-lucide="heart" ${iconStyle}></i>`,
                '💗': `<i data-lucide="heart" ${iconStyle}></i>`,
                '💖': `<i data-lucide="heart" ${iconStyle}></i>`,
                '💘': `<i data-lucide="heart" ${iconStyle}></i>`,
                '💝': `<i data-lucide="gift" ${iconStyle}></i>`,
                
                // Celebration
                '🎉': `<i data-lucide="party-popper" ${iconStyle}></i>`,
                '🎊': `<i data-lucide="sparkles" ${iconStyle}></i>`,
                '🎈': `<i data-lucide="circle" ${iconStyle}></i>`,
                '🎁': `<i data-lucide="gift" ${iconStyle}></i>`,
                '🎀': `<i data-lucide="gift" ${iconStyle}></i>`,
                '🎄': `<i data-lucide="tree-pine" ${iconStyle}></i>`,
                '🎃': `<i data-lucide="circle" ${iconStyle}></i>`,
                '🎆': `<i data-lucide="sparkles" ${iconStyle}></i>`,
                '🎇': `<i data-lucide="sparkle" ${iconStyle}></i>`,
                '🧨': `<i data-lucide="zap" ${iconStyle}></i>`,
                '✨': `<i data-lucide="sparkles" ${iconStyle}></i>`,
                '🎈': `<i data-lucide="circle" ${iconStyle}></i>`,
                '🎉': `<i data-lucide="party-popper" ${iconStyle}></i>`,
                '🎊': `<i data-lucide="sparkles" ${iconStyle}></i>`,
                '🎋': `<i data-lucide="tree-deciduous" ${iconStyle}></i>`,
                '🎍': `<i data-lucide="tree-pine" ${iconStyle}></i>`,
                '🎎': `<i data-lucide="users" ${iconStyle}></i>`,
                '🎏': `<i data-lucide="fish" ${iconStyle}></i>`,
                '🎐': `<i data-lucide="bell" ${iconStyle}></i>`,
                '🎑': `<i data-lucide="moon" ${iconStyle}></i>`,
                '🧧': `<i data-lucide="gift" ${iconStyle}></i>`,
                '🎀': `<i data-lucide="gift" ${iconStyle}></i>`,
                '🎁': `<i data-lucide="gift" ${iconStyle}></i>`,
                '🎗️': `<i data-lucide="award" ${iconStyle}></i>`,
                '🎗': `<i data-lucide="award" ${iconStyle}></i>`,
                '🎟️': `<i data-lucide="ticket" ${iconStyle}></i>`,
                '🎟': `<i data-lucide="ticket" ${iconStyle}></i>`,
                '🎫': `<i data-lucide="ticket" ${iconStyle}></i>`,
                
                // Flags and Symbols
                '🏳️': `<i data-lucide="flag" ${iconStyle}></i>`,
                '🏳': `<i data-lucide="flag" ${iconStyle}></i>`,
                '🏴': `<i data-lucide="flag" ${iconStyle}></i>`,
                '🏁': `<i data-lucide="flag" ${iconStyle}></i>`,
                '🚩': `<i data-lucide="flag" ${iconStyle}></i>`,
                '🏳️‍🌈': `<i data-lucide="flag" ${iconStyle}></i>`,
                '🏳️‍⚧️': `<i data-lucide="flag" ${iconStyle}></i>`,
                '🏴‍☠️': `<i data-lucide="skull" ${iconStyle}></i>`,
                
                // Emotions and Hands (minimal replacement)
                '👍': `<i data-lucide="thumbs-up" ${iconStyle}></i>`,
                '👎': `<i data-lucide="thumbs-down" ${iconStyle}></i>`,
                '👏': `<i data-lucide="hand" ${iconStyle}></i>`,
                '🙏': `<i data-lucide="hand" ${iconStyle}></i>`,
                '🤲': `<i data-lucide="hand" ${iconStyle}></i>`,
                '🤝': `<i data-lucide="handshake" ${iconStyle}></i>`,
                '👐': `<i data-lucide="hand" ${iconStyle}></i>`,
                '🤗': `<i data-lucide="smile" ${iconStyle}></i>`,
                '🫂': `<i data-lucide="users" ${iconStyle}></i>`,
                
                // Additional Mission Related
                '🌱': `<i data-lucide="sprout" ${iconStyle}></i>`,
                '🪴': `<i data-lucide="flower-2" ${iconStyle}></i>`,
                '🌿': `<i data-lucide="leaf" ${iconStyle}></i>`,
                '🍀': `<i data-lucide="clover" ${iconStyle}></i>`,
                '🪶': `<i data-lucide="feather" ${iconStyle}></i>`,
                '🕊️': `<i data-lucide="bird" ${iconStyle}></i>`,
                '🕊': `<i data-lucide="bird" ${iconStyle}></i>`,
                '🦅': `<i data-lucide="bird" ${iconStyle}></i>`,
                '🦉': `<i data-lucide="bird" ${iconStyle}></i>`,
                '🦆': `<i data-lucide="bird" ${iconStyle}></i>`,
                '🐦': `<i data-lucide="bird" ${iconStyle}></i>`,
                '🐧': `<i data-lucide="bird" ${iconStyle}></i>`,
                '🐣': `<i data-lucide="egg" ${iconStyle}></i>`,
                '🐤': `<i data-lucide="bird" ${iconStyle}></i>`,
                '🐥': `<i data-lucide="bird" ${iconStyle}></i>`,
                '🦋': `<i data-lucide="bug" ${iconStyle}></i>`,
                '🐛': `<i data-lucide="bug" ${iconStyle}></i>`,
                '🐝': `<i data-lucide="bug" ${iconStyle}></i>`,
                '🐞': `<i data-lucide="bug" ${iconStyle}></i>`,
                '🦟': `<i data-lucide="bug" ${iconStyle}></i>`,
                '🦗': `<i data-lucide="bug" ${iconStyle}></i>`,
                '🕷️': `<i data-lucide="bug" ${iconStyle}></i>`,
                '🕷': `<i data-lucide="bug" ${iconStyle}></i>`,
                '🕸️': `<i data-lucide="network" ${iconStyle}></i>`,
                '🕸': `<i data-lucide="network" ${iconStyle}></i>`,
                '🦂': `<i data-lucide="bug" ${iconStyle}></i>`,
                '🐢': `<i data-lucide="turtle" ${iconStyle}></i>`,
                '🐍': `<i data-lucide="snake" ${iconStyle}></i>`,
                '🦎': `<i data-lucide="fish" ${iconStyle}></i>`,
                '🦖': `<i data-lucide="skull" ${iconStyle}></i>`,
                '🦕': `<i data-lucide="circle" ${iconStyle}></i>`,
                '🐙': `<i data-lucide="octagon" ${iconStyle}></i>`,
                '🦑': `<i data-lucide="fish" ${iconStyle}></i>`,
                '🦐': `<i data-lucide="fish" ${iconStyle}></i>`,
                '🦞': `<i data-lucide="fish" ${iconStyle}></i>`,
                '🦀': `<i data-lucide="circle" ${iconStyle}></i>`,
                '🐡': `<i data-lucide="fish" ${iconStyle}></i>`,
                '🐠': `<i data-lucide="fish" ${iconStyle}></i>`,
                '🐟': `<i data-lucide="fish" ${iconStyle}></i>`,
                '🐬': `<i data-lucide="fish" ${iconStyle}></i>`,
                '🐳': `<i data-lucide="fish" ${iconStyle}></i>`,
                '🐋': `<i data-lucide="fish" ${iconStyle}></i>`,
                '🦈': `<i data-lucide="fish" ${iconStyle}></i>`,
                '🐊': `<i data-lucide="fish" ${iconStyle}></i>`,
                '🐅': `<i data-lucide="cat" ${iconStyle}></i>`,
                '🐆': `<i data-lucide="cat" ${iconStyle}></i>`,
                '🦓': `<i data-lucide="circle" ${iconStyle}></i>`,
                '🦍': `<i data-lucide="circle" ${iconStyle}></i>`,
                '🦧': `<i data-lucide="circle" ${iconStyle}></i>`,
                '🐘': `<i data-lucide="circle" ${iconStyle}></i>`,
                '🦛': `<i data-lucide="circle" ${iconStyle}></i>`,
                '🦏': `<i data-lucide="circle" ${iconStyle}></i>`,
                '🐪': `<i data-lucide="circle" ${iconStyle}></i>`,
                '🐫': `<i data-lucide="circle" ${iconStyle}></i>`,
                '🦒': `<i data-lucide="circle" ${iconStyle}></i>`,
                '🦘': `<i data-lucide="rabbit" ${iconStyle}></i>`,
                '🐃': `<i data-lucide="circle" ${iconStyle}></i>`,
                '🐂': `<i data-lucide="circle" ${iconStyle}></i>`,
                '🐄': `<i data-lucide="milk" ${iconStyle}></i>`,
                '🐎': `<i data-lucide="circle" ${iconStyle}></i>`,
                '🐖': `<i data-lucide="piggy-bank" ${iconStyle}></i>`,
                '🐏': `<i data-lucide="circle" ${iconStyle}></i>`,
                '🐑': `<i data-lucide="cloud" ${iconStyle}></i>`,
                '🦙': `<i data-lucide="circle" ${iconStyle}></i>`,
                '🐐': `<i data-lucide="circle" ${iconStyle}></i>`,
                '🦌': `<i data-lucide="circle" ${iconStyle}></i>`,
                '🐕': `<i data-lucide="dog" ${iconStyle}></i>`,
                '🐩': `<i data-lucide="dog" ${iconStyle}></i>`,
                '🦮': `<i data-lucide="dog" ${iconStyle}></i>`,
                '🐕‍🦺': `<i data-lucide="dog" ${iconStyle}></i>`,
                '🐈': `<i data-lucide="cat" ${iconStyle}></i>`,
                '🐈‍⬛': `<i data-lucide="cat" ${iconStyle}></i>`,
                '🪶': `<i data-lucide="feather" ${iconStyle}></i>`,
                '🐓': `<i data-lucide="bird" ${iconStyle}></i>`,
                '🦃': `<i data-lucide="bird" ${iconStyle}></i>`,
                '🦚': `<i data-lucide="bird" ${iconStyle}></i>`,
                '🦜': `<i data-lucide="bird" ${iconStyle}></i>`,
                '🦢': `<i data-lucide="bird" ${iconStyle}></i>`,
                '🦩': `<i data-lucide="bird" ${iconStyle}></i>`,
                '🕊️': `<i data-lucide="bird" ${iconStyle}></i>`,
                '🕊': `<i data-lucide="bird" ${iconStyle}></i>`,
                '🐇': `<i data-lucide="rabbit" ${iconStyle}></i>`,
                '🦝': `<i data-lucide="circle" ${iconStyle}></i>`,
                '🦨': `<i data-lucide="circle" ${iconStyle}></i>`,
                '🦡': `<i data-lucide="circle" ${iconStyle}></i>`,
                '🦦': `<i data-lucide="fish" ${iconStyle}></i>`,
                '🦥': `<i data-lucide="circle" ${iconStyle}></i>`,
                '🐁': `<i data-lucide="mouse-pointer" ${iconStyle}></i>`,
                '🐀': `<i data-lucide="mouse-pointer" ${iconStyle}></i>`,
                '🐿️': `<i data-lucide="squirrel" ${iconStyle}></i>`,
                '🐿': `<i data-lucide="squirrel" ${iconStyle}></i>`,
                '🦔': `<i data-lucide="circle" ${iconStyle}></i>`,
                
                // NOSSA MISSÃO and similar context
                'NOSSA': '', // This might be part of "NOSSA MISSÃO" - handled separately
                '🌟': `<i data-lucide="star" ${iconStyle}></i>`,
                '🎯': `<i data-lucide="target" ${iconStyle}></i>`,
                '🚀': `<i data-lucide="rocket" ${iconStyle}></i>`,
                '💡': `<i data-lucide="lightbulb" ${iconStyle}></i>`,
                '🌱': `<i data-lucide="sprout" ${iconStyle}></i>`,
                '🤝': `<i data-lucide="handshake" ${iconStyle}></i>`,
                '🏗️': `<i data-lucide="construction" ${iconStyle}></i>`,
                '🏗': `<i data-lucide="construction" ${iconStyle}></i>`,
                '🔨': `<i data-lucide="hammer" ${iconStyle}></i>`,
                '⚡': `<i data-lucide="zap" ${iconStyle}></i>`,
                '🎓': `<i data-lucide="graduation-cap" ${iconStyle}></i>`,
                '🌐': `<i data-lucide="globe" ${iconStyle}></i>`,
                '🔗': `<i data-lucide="link" ${iconStyle}></i>`,
                '📢': `<i data-lucide="megaphone" ${iconStyle}></i>`,
                '📣': `<i data-lucide="megaphone" ${iconStyle}></i>`,
                '🗣️': `<i data-lucide="megaphone" ${iconStyle}></i>`,
                '🗣': `<i data-lucide="megaphone" ${iconStyle}></i>`,
                '💪': `<i data-lucide="dumbbell" ${iconStyle}></i>`,
                '🏋️': `<i data-lucide="dumbbell" ${iconStyle}></i>`,
                '🏋': `<i data-lucide="dumbbell" ${iconStyle}></i>`,
                '🏃': `<i data-lucide="person-standing" ${iconStyle}></i>`,
                '🏃‍♂️': `<i data-lucide="person-standing" ${iconStyle}></i>`,
                '🏃‍♀️': `<i data-lucide="person-standing" ${iconStyle}></i>`,
                '🧗': `<i data-lucide="mountain" ${iconStyle}></i>`,
                '🧗‍♂️': `<i data-lucide="mountain" ${iconStyle}></i>`,
                '🧗‍♀️': `<i data-lucide="mountain" ${iconStyle}></i>`,
                '🧭': `<i data-lucide="compass" ${iconStyle}></i>`,
                '🗺️': `<i data-lucide="map" ${iconStyle}></i>`,
                '🗺': `<i data-lucide="map" ${iconStyle}></i>`,
                '🧭': `<i data-lucide="compass" ${iconStyle}></i>`,
                '🎒': `<i data-lucide="backpack" ${iconStyle}></i>`,
                '🎓': `<i data-lucide="graduation-cap" ${iconStyle}></i>`,
                '📜': `<i data-lucide="scroll" ${iconStyle}></i>`,
                '🏛️': `<i data-lucide="landmark" ${iconStyle}></i>`,
                '🏛': `<i data-lucide="landmark" ${iconStyle}></i>`,
                '🌉': `<i data-lucide="milestone" ${iconStyle}></i>`,
                '🌃': `<i data-lucide="building" ${iconStyle}></i>`,
                '🏙️': `<i data-lucide="building-2" ${iconStyle}></i>`,
                '🏙': `<i data-lucide="building-2" ${iconStyle}></i>`,
                '🌆': `<i data-lucide="sunrise" ${iconStyle}></i>`,
                '🌇': `<i data-lucide="sunset" ${iconStyle}></i>`,
                '🌄': `<i data-lucide="sunrise" ${iconStyle}></i>`,
                '🌅': `<i data-lucide="sunrise" ${iconStyle}></i>`,
                '🎆': `<i data-lucide="sparkles" ${iconStyle}></i>`,
                '🎇': `<i data-lucide="sparkle" ${iconStyle}></i>`,
                '🌠': `<i data-lucide="sparkle" ${iconStyle}></i>`,
                '🎑': `<i data-lucide="moon" ${iconStyle}></i>`,
                '🌌': `<i data-lucide="stars" ${iconStyle}></i>`,
                '🌃': `<i data-lucide="moon" ${iconStyle}></i>`,
                '🌆': `<i data-lucide="sun" ${iconStyle}></i>`,
                '🏞️': `<i data-lucide="image" ${iconStyle}></i>`,
                '🏞': `<i data-lucide="image" ${iconStyle}></i>`,
                '🌁': `<i data-lucide="cloud" ${iconStyle}></i>`,
                
                // Any remaining
                '🔴': `<i data-lucide="circle" ${iconStyle}></i>`,
                '🟠': `<i data-lucide="circle" ${iconStyle}></i>`,
                '🟡': `<i data-lucide="circle" ${iconStyle}></i>`,
                '🟢': `<i data-lucide="circle" ${iconStyle}></i>`,
                '🔵': `<i data-lucide="circle" ${iconStyle}></i>`,
                '🟣': `<i data-lucide="circle" ${iconStyle}></i>`,
                '⚫': `<i data-lucide="circle" ${iconStyle}></i>`,
                '⚪': `<i data-lucide="circle" ${iconStyle}></i>`,
                '🟤': `<i data-lucide="circle" ${iconStyle}></i>`,
                '🔺': `<i data-lucide="triangle" ${iconStyle}></i>`,
                '🔻': `<i data-lucide="triangle" ${iconStyle}></i>`,
                '🔸': `<i data-lucide="diamond" ${iconStyle}></i>`,
                '🔹': `<i data-lucide="diamond" ${iconStyle}></i>`,
                '🔶': `<i data-lucide="diamond" ${iconStyle}></i>`,
                '🔷': `<i data-lucide="diamond" ${iconStyle}></i>`,
                '🔳': `<i data-lucide="square" ${iconStyle}></i>`,
                '🔲': `<i data-lucide="square" ${iconStyle}></i>`,
                '▪️': `<i data-lucide="square" ${iconStyle}></i>`,
                '▪': `<i data-lucide="square" ${iconStyle}></i>`,
                '▫️': `<i data-lucide="square" ${iconStyle}></i>`,
                '▫': `<i data-lucide="square" ${iconStyle}></i>`,
                '◾': `<i data-lucide="square" ${iconStyle}></i>`,
                '◽': `<i data-lucide="square" ${iconStyle}></i>`,
                '◼️': `<i data-lucide="square" ${iconStyle}></i>`,
                '◼': `<i data-lucide="square" ${iconStyle}></i>`,
                '◻️': `<i data-lucide="square" ${iconStyle}></i>`,
                '◻': `<i data-lucide="square" ${iconStyle}></i>`,
                '🟥': `<i data-lucide="square" ${iconStyle}></i>`,
                '🟧': `<i data-lucide="square" ${iconStyle}></i>`,
                '🟨': `<i data-lucide="square" ${iconStyle}></i>`,
                '🟩': `<i data-lucide="square" ${iconStyle}></i>`,
                '🟦': `<i data-lucide="square" ${iconStyle}></i>`,
                '🟪': `<i data-lucide="square" ${iconStyle}></i>`,
                '⬛': `<i data-lucide="square" ${iconStyle}></i>`,
                '⬜': `<i data-lucide="square" ${iconStyle}></i>`,
                '🟫': `<i data-lucide="square" ${iconStyle}></i>`,
                
                // Additional Business/Mission/Culture emojis
                '🎭': `<i data-lucide="theater" ${iconStyle}></i>`,
                '🎨': `<i data-lucide="palette" ${iconStyle}></i>`,
                '🏛️': `<i data-lucide="building" ${iconStyle}></i>`,
                '🏛': `<i data-lucide="building" ${iconStyle}></i>`,
                '⚖️': `<i data-lucide="scale" ${iconStyle}></i>`,
                '⚖': `<i data-lucide="scale" ${iconStyle}></i>`,
                '🔗': `<i data-lucide="link" ${iconStyle}></i>`,
                '🔐': `<i data-lucide="lock" ${iconStyle}></i>`,
                '🔓': `<i data-lucide="unlock" ${iconStyle}></i>`,
                '🔒': `<i data-lucide="lock" ${iconStyle}></i>`,
                '🔑': `<i data-lucide="key" ${iconStyle}></i>`,
                '🎖️': `<i data-lucide="medal" ${iconStyle}></i>`,
                '🎖': `<i data-lucide="medal" ${iconStyle}></i>`,
                '🏅': `<i data-lucide="award" ${iconStyle}></i>`,
                '🥇': `<i data-lucide="medal" ${iconStyle}></i>`,
                '🥈': `<i data-lucide="medal" ${iconStyle}></i>`,
                '🥉': `<i data-lucide="medal" ${iconStyle}></i>`,
                '🎊': `<i data-lucide="sparkles" ${iconStyle}></i>`,
                '🎉': `<i data-lucide="party-popper" ${iconStyle}></i>`,
                '🎈': `<i data-lucide="zap" ${iconStyle}></i>`,
                '🎁': `<i data-lucide="gift" ${iconStyle}></i>`,
                '🎀': `<i data-lucide="award" ${iconStyle}></i>`,
                '🏁': `<i data-lucide="flag" ${iconStyle}></i>`,
                '🚩': `<i data-lucide="flag" ${iconStyle}></i>`,
                '🏴': `<i data-lucide="flag" ${iconStyle}></i>`,
                '🏳️': `<i data-lucide="flag" ${iconStyle}></i>`,
                '🏳': `<i data-lucide="flag" ${iconStyle}></i>`,
                '⬆️': `<i data-lucide="arrow-up" ${iconStyle}></i>`,
                '⬇️': `<i data-lucide="arrow-down" ${iconStyle}></i>`,
                '⬅️': `<i data-lucide="arrow-left" ${iconStyle}></i>`,
                '➡️': `<i data-lucide="arrow-right" ${iconStyle}></i>`,
                '↗️': `<i data-lucide="arrow-up-right" ${iconStyle}></i>`,
                '↖️': `<i data-lucide="arrow-up-left" ${iconStyle}></i>`,
                '↘️': `<i data-lucide="arrow-down-right" ${iconStyle}></i>`,
                '↙️': `<i data-lucide="arrow-down-left" ${iconStyle}></i>`,
                '↔️': `<i data-lucide="arrow-left-right" ${iconStyle}></i>`,
                '↕️': `<i data-lucide="arrow-up-down" ${iconStyle}></i>`,
                '🔄': `<i data-lucide="refresh-cw" ${iconStyle}></i>`,
                '🔃': `<i data-lucide="refresh-ccw" ${iconStyle}></i>`,
                '🔁': `<i data-lucide="repeat" ${iconStyle}></i>`,
                '🔂': `<i data-lucide="repeat-1" ${iconStyle}></i>`,
                '⏭️': `<i data-lucide="skip-forward" ${iconStyle}></i>`,
                '⏮️': `<i data-lucide="skip-back" ${iconStyle}></i>`,
                '⏯️': `<i data-lucide="play-circle" ${iconStyle}></i>`,
                '⏸️': `<i data-lucide="pause-circle" ${iconStyle}></i>`,
                '⏹️': `<i data-lucide="stop-circle" ${iconStyle}></i>`,
                '⏺️': `<i data-lucide="circle" ${iconStyle}></i>`,
                '🔀': `<i data-lucide="shuffle" ${iconStyle}></i>`,
                '📣': `<i data-lucide="megaphone" ${iconStyle}></i>`,
                '📢': `<i data-lucide="megaphone" ${iconStyle}></i>`,
                '🔔': `<i data-lucide="bell" ${iconStyle}></i>`,
                '🔕': `<i data-lucide="bell-off" ${iconStyle}></i>`,
                '📯': `<i data-lucide="megaphone" ${iconStyle}></i>`,
                '🔊': `<i data-lucide="volume-2" ${iconStyle}></i>`,
                '🔉': `<i data-lucide="volume-1" ${iconStyle}></i>`,
                '🔈': `<i data-lucide="volume" ${iconStyle}></i>`,
                '🔇': `<i data-lucide="volume-x" ${iconStyle}></i>`,
                '📻': `<i data-lucide="radio" ${iconStyle}></i>`,
                '🎵': `<i data-lucide="music" ${iconStyle}></i>`,
                '🎶': `<i data-lucide="music" ${iconStyle}></i>`,
                '🎼': `<i data-lucide="music" ${iconStyle}></i>`,
                '🎧': `<i data-lucide="headphones" ${iconStyle}></i>`,
                '🎤': `<i data-lucide="mic" ${iconStyle}></i>`,
                '🎸': `<i data-lucide="music" ${iconStyle}></i>`,
                '🥁': `<i data-lucide="music" ${iconStyle}></i>`,
                '🎹': `<i data-lucide="music" ${iconStyle}></i>`,
                '🎺': `<i data-lucide="music" ${iconStyle}></i>`,
                '🎷': `<i data-lucide="music" ${iconStyle}></i>`,
                '🪕': `<i data-lucide="music" ${iconStyle}></i>`,
                '🎻': `<i data-lucide="music" ${iconStyle}></i>`
            };
            
            // Replace all emojis with their icons
            Object.entries(replacements).forEach(([emoji, icon]) => {
                if (emoji && icon) {
                    const regex = new RegExp(emoji.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'), 'g');
                    html = html.replace(regex, icon);
                }
            });
            
            // Fallback: Replace ANY remaining emojis with a generic icon
            // This regex catches most emoji patterns
            const emojiRegex = /[\u{1F300}-\u{1F9FF}]|[\u{2600}-\u{26FF}]|[\u{2700}-\u{27BF}]|[\u{1F680}-\u{1F6FF}]|[\u{1F900}-\u{1F9FF}]|[\u{1FA70}-\u{1FAFF}]|[\u{2300}-\u{23FF}]|[\u{2B00}-\u{2BFF}]|[\u{1F000}-\u{1F02F}]|[\u{1F0A0}-\u{1F0FF}]|[\u{1F100}-\u{1F1FF}]|[\u{1F200}-\u{1F2FF}]|[\u{1F780}-\u{1F7FF}]|[\u{1F800}-\u{1F8FF}]|[\u{1FA00}-\u{1FA6F}]/gu;
            
            html = html.replace(emojiRegex, `<i data-lucide="circle" ${iconStyle}></i>`);
            
            // After all replacements, re-initialize Lucide icons
            setTimeout(() => {
                if (typeof lucide !== 'undefined') {
                    lucide.createIcons();
                }
            }, 100);
            
            return html;
        }
    </script>
</body>
</html>