<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Brazilian Fan Token Dashboard - Chiliz Chain</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .dashboard-container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.98);
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }

        .header h1 {
            font-size: 28px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .chiliz-badge {
            background: #FF4E50;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            padding: 30px;
            background: #f8f9fa;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.15);
        }

        .stat-card h3 {
            color: #6b7280;
            font-size: 14px;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .stat-value {
            font-size: 32px;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 10px;
        }

        .stat-change {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            padding: 4px 8px;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 600;
        }

        .stat-change.positive {
            background: #d1fae5;
            color: #065f46;
        }

        .stat-change.negative {
            background: #fee2e2;
            color: #991b1b;
        }

        .filters-section {
            padding: 20px 30px;
            background: white;
            border-bottom: 1px solid #e5e7eb;
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            align-items: center;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .filter-label {
            font-size: 12px;
            color: #6b7280;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .team-filters {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .team-filter-btn {
            padding: 8px 16px;
            border: 2px solid #e5e7eb;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            font-size: 14px;
        }

        .team-filter-btn:hover {
            border-color: #9ca3af;
        }

        .team-filter-btn.active {
            color: white;
            border-color: transparent;
        }

        .team-filter-btn.active.MENGO { background: #E3002D; }
        .team-filter-btn.active.SCCP { background: #000000; }
        .team-filter-btn.active.VERDAO { background: #006437; }
        .team-filter-btn.active.FLU { background: #862938; }
        .team-filter-btn.active.BAHIA { background: #006CB5; }
        .team-filter-btn.active.VASCO { background: #000000; }
        .team-filter-btn.active.MIBR { background: #FFD700; color: #000; }

        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 30px;
            padding: 30px;
        }

        .chart-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .chart-title {
            font-size: 18px;
            font-weight: 700;
            color: #1f2937;
        }

        .chart-canvas {
            max-height: 400px;
        }

        .token-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .token-table th {
            background: #f9fafb;
            padding: 12px;
            text-align: left;
            font-weight: 600;
            color: #6b7280;
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            border-bottom: 2px solid #e5e7eb;
        }

        .token-table td {
            padding: 12px;
            border-bottom: 1px solid #f3f4f6;
            font-size: 14px;
        }

        .token-table tr:hover {
            background: #f9fafb;
        }

        .team-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 6px;
            font-weight: 600;
        }

        .comparison-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .comparison-card {
            background: #f9fafb;
            padding: 15px;
            border-radius: 10px;
            border: 1px solid #e5e7eb;
        }

        .comparison-team {
            font-weight: 700;
            font-size: 16px;
            margin-bottom: 10px;
        }

        .comparison-metric {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 8px;
        }

        .metric-label {
            color: #6b7280;
            font-size: 12px;
        }

        .metric-value {
            font-weight: 600;
            font-size: 14px;
        }

        .connection-status {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            font-size: 14px;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #10b981;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        .data-section {
            padding: 30px;
            background: #f8f9fa;
            border-top: 1px solid #e5e7eb;
        }

        .btn {
            padding: 12px 24px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 16px;
            transition: transform 0.3s ease;
            margin: 5px;
        }

        .btn:hover {
            transform: scale(1.05);
        }

        .date-input {
            padding: 8px 12px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 14px;
            margin: 0 5px;
        }

        @media (max-width: 768px) {
            .charts-grid {
                grid-template-columns: 1fr;
            }
            
            .header {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="dashboard-container">
        <!-- Header -->
        <div class="header">
            <h1>
                ‚öΩ Brazilian Fan Token Dashboard
                <span class="chiliz-badge">Chiliz Chain</span>
            </h1>
            <div class="connection-status">
                <div class="status-dot"></div>
                <span id="connectionStatus">Mock Data Mode</span>
            </div>
        </div>

        <!-- Summary Stats -->
        <div class="stats-grid">
            <div class="stat-card">
                <h3>Total Volume (CHZ)</h3>
                <div class="stat-value" id="totalVolume">0</div>
                <span class="stat-change positive" id="volumeChange">‚Üë 0%</span>
            </div>
            <div class="stat-card">
                <h3>Total Transactions</h3>
                <div class="stat-value" id="totalTransactions">0</div>
                <span class="stat-change positive">‚Üë 12.5%</span>
            </div>
            <div class="stat-card">
                <h3>Average Price</h3>
                <div class="stat-value" id="avgPrice">R$ 0.00</div>
                <span class="stat-change positive">‚Üë 3.2%</span>
            </div>
            <div class="stat-card">
                <h3>Active Teams</h3>
                <div class="stat-value" id="activeTeams">7</div>
                <span class="stat-change positive">All Teams</span>
            </div>
        </div>

        <!-- Filters -->
        <div class="filters-section">
            <div class="filter-group">
                <div class="filter-label">Team Selection</div>
                <div class="team-filters" id="teamFilters">
                    <!-- Will be populated by JavaScript -->
                </div>
            </div>
            
            <div class="filter-group">
                <div class="filter-label">Date Range</div>
                <div>
                    <input type="date" id="startDate" class="date-input">
                    <span>to</span>
                    <input type="date" id="endDate" class="date-input">
                </div>
            </div>
        </div>

        <!-- Charts -->
        <div class="charts-grid">
            <!-- Volume Chart -->
            <div class="chart-card">
                <div class="chart-header">
                    <h2 class="chart-title">Daily Trading Volume</h2>
                </div>
                <canvas id="volumeChart" class="chart-canvas"></canvas>
            </div>

            <!-- Market Share Chart -->
            <div class="chart-card">
                <div class="chart-header">
                    <h2 class="chart-title">Market Share Distribution</h2>
                </div>
                <canvas id="marketShareChart" class="chart-canvas"></canvas>
            </div>

            <!-- Rankings Table -->
            <div class="chart-card">
                <div class="chart-header">
                    <h2 class="chart-title">Team Rankings by Volume</h2>
                </div>
                <table class="token-table">
                    <thead>
                        <tr>
                            <th>Rank</th>
                            <th>Team</th>
                            <th>Total Volume</th>
                            <th>Market Share</th>
                            <th>Avg Price</th>
                        </tr>
                    </thead>
                    <tbody id="rankingsTableBody">
                        <!-- Will be populated by JavaScript -->
                    </tbody>
                </table>
            </div>

            <!-- Team Comparison -->
            <div class="chart-card">
                <div class="chart-header">
                    <h2 class="chart-title">Team Details</h2>
                </div>
                <div class="comparison-grid" id="comparisonGrid">
                    <!-- Will be populated by JavaScript -->
                </div>
            </div>
        </div>

        <!-- Data Management -->
        <div class="data-section">
            <h3 style="margin-bottom: 15px; font-size: 18px; font-weight: 700;">
                Data Management & Blockchain Integration
            </h3>
            <p style="color: #6b7280; margin-bottom: 20px;">
                Dashboard configured for Chiliz Chain (Chain ID: 88888). Ready for live blockchain integration.
            </p>
            <div>
                <button class="btn" onclick="showChainConfig()">üîó View Chain Config</button>
                <button class="btn" onclick="toggleLiveMode()">‚ñ∂Ô∏è Toggle Live Mode</button>
                <button class="btn" onclick="refreshData()">üîÑ Refresh Data</button>
                <button class="btn" onclick="exportData()">üì• Export Data</button>
            </div>
        </div>
    </div>

    <script>
        // Brazilian Teams Configuration
        const BRAZILIAN_TOKENS = {
            MENGO: {
                address: "0xd1723eb9e7c6ee7c7e2d421b2758dc0f2166eddc",
                name: "Flamengo",
                supply: 30000000,
                holders: 27140,
                color: "#E3002D"
            },
            SCCP: {
                address: "0x20BFeab58f8bE903753d037Ba7e307fc77c97388",
                name: "Corinthians",
                supply: 20000000,
                holders: 21986,
                color: "#000000"
            },
            VERDAO: {
                address: "0x971364Ec452958d4D65Ba8D508FAa226d7117279",
                name: "Palmeiras",
                supply: 20000000,
                holders: 8424,
                color: "#006437"
            },
            FLU: {
                address: "0x86930777d43605C40bA786F7802778ff5413eFaB",
                name: "Fluminense",
                supply: 10000000,
                holders: 6599,
                color: "#862938"
            },
            BAHIA: {
                address: "0xE92e152fC0ff1368739670a5175175154Ceeef42",
                name: "Bahia",
                supply: 10000000,
                holders: 5000,
                color: "#006CB5"
            },
            MIBR: {
                address: "0xa8206Af1e6a0289156d45B9d60e5bbD5d1fCf68d",
                name: "MIBR",
                supply: 10000000,
                holders: 9072,
                color: "#FFD700"
            },
            VASCO: {
                address: "0x689dee82d191dac845599f46393c2efe4b5896a2",
                name: "Vasco da Gama",
                supply: 20000000,
                holders: 7500,
                color: "#000000"
            }
        };

        // Global variables
        let tokenData = [];
        let selectedTeams = [];
        let liveMode = false;
        let charts = {};

        // Initialize dashboard
        document.addEventListener('DOMContentLoaded', function() {
            initializeFilters();
            initializeDateRange();
            generateMockData();
            updateDashboard();
            initializeCharts();
        });

        // Initialize team filters
        function initializeFilters() {
            const filterContainer = document.getElementById('teamFilters');
            
            Object.entries(BRAZILIAN_TOKENS).forEach(([symbol, config]) => {
                const btn = document.createElement('button');
                btn.className = `team-filter-btn ${symbol}`;
                btn.textContent = config.name;
                btn.onclick = () => toggleTeam(symbol, btn);
                filterContainer.appendChild(btn);
            });
        }

        // Initialize date range (last 30 days)
        function initializeDateRange() {
            const endDate = new Date();
            const startDate = new Date();
            startDate.setDate(startDate.getDate() - 30);
            
            document.getElementById('startDate').value = startDate.toISOString().split('T')[0];
            document.getElementById('endDate').value = endDate.toISOString().split('T')[0];
        }

        // Toggle team selection
        function toggleTeam(team, btn) {
            const index = selectedTeams.indexOf(team);
            if (index > -1) {
                selectedTeams.splice(index, 1);
                btn.classList.remove('active');
            } else {
                selectedTeams.push(team);
                btn.classList.add('active');
            }
            updateDashboard();
        }

        // Generate mock data
        function generateMockData() {
            tokenData = [];
            const startDate = new Date(document.getElementById('startDate').value);
            const endDate = new Date(document.getElementById('endDate').value);
            
            for (let d = new Date(startDate); d <= endDate; d.setDate(d.getDate() + 1)) {
                Object.entries(BRAZILIAN_TOKENS).forEach(([symbol, config]) => {
                    const baseVolume = Math.random() * 1000000 + 500000;
                    const isWeekend = d.getDay() === 0 || d.getDay() === 6;
                    const volumeMultiplier = isWeekend ? 0.6 : 1;
                    
                    tokenData.push({
                        date: new Date(d).toISOString().split('T')[0],
                        team: symbol,
                        teamName: config.name,
                        volume: Math.floor(baseVolume * volumeMultiplier * (1 + Math.random() * 0.5)),
                        transactions: Math.floor(Math.random() * 500 + 100),
                        avgPrice: Math.random() * 10 + 5,
                        holders: config.holders,
                        marketCap: config.supply * (Math.random() * 10 + 5)
                    });
                });
            }
        }

        // Update dashboard with filtered data
        function updateDashboard() {
            const filteredData = getFilteredData();
            updateStats(filteredData);
            updateCharts(filteredData);
            updateRankings(filteredData);
            updateComparison(filteredData);
        }

        // Get filtered data based on selections
        function getFilteredData() {
            const startDate = document.getElementById('startDate').value;
            const endDate = document.getElementById('endDate').value;
            
            return tokenData.filter(item => {
                const teamFilter = selectedTeams.length === 0 || selectedTeams.includes(item.team);
                const dateFilter = item.date >= startDate && item.date <= endDate;
                return teamFilter && dateFilter;
            });
        }

        // Update summary statistics
        function updateStats(data) {
            const totalVolume = data.reduce((sum, item) => sum + item.volume, 0);
            const totalTransactions = data.reduce((sum, item) => sum + item.transactions, 0);
            const avgPrice = data.reduce((sum, item) => sum + item.avgPrice, 0) / data.length || 0;
            
            document.getElementById('totalVolume').textContent = formatNumber(totalVolume);
            document.getElementById('totalTransactions').textContent = formatNumber(totalTransactions);
            document.getElementById('avgPrice').textContent = 'R$ ' + avgPrice.toFixed(2);
            
            // Calculate volume change
            const today = new Date().toISOString().split('T')[0];
            const yesterday = new Date(Date.now() - 24 * 60 * 60 * 1000).toISOString().split('T')[0];
            
            const todayVolume = data.filter(item => item.date === today).reduce((sum, item) => sum + item.volume, 0);
            const yesterdayVolume = data.filter(item => item.date === yesterday).reduce((sum, item) => sum + item.volume, 0);
            
            const volumeChange = yesterdayVolume ? ((todayVolume - yesterdayVolume) / yesterdayVolume * 100) : 0;
            const changeElement = document.getElementById('volumeChange');
            changeElement.textContent = (volumeChange >= 0 ? '‚Üë ' : '‚Üì ') + Math.abs(volumeChange).toFixed(2) + '%';
            changeElement.className = 'stat-change ' + (volumeChange >= 0 ? 'positive' : 'negative');
        }

        // Initialize charts
        function initializeCharts() {
            // Volume Chart
            const volumeCtx = document.getElementById('volumeChart').getContext('2d');
            charts.volume = new Chart(volumeCtx, {
                type: 'line',
                data: {
                    labels: [],
                    datasets: []
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: true,
                            position: 'bottom'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return formatNumber(value);
                                }
                            }
                        }
                    }
                }
            });

            // Market Share Chart
            const marketCtx = document.getElementById('marketShareChart').getContext('2d');
            charts.marketShare = new Chart(marketCtx, {
                type: 'doughnut',
                data: {
                    labels: [],
                    datasets: [{
                        data: [],
                        backgroundColor: []
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: true,
                            position: 'right'
                        }
                    }
                }
            });
        }

        // Update charts with new data
        function updateCharts(data) {
            // Prepare data for volume chart
            const dates = [...new Set(data.map(item => item.date))].sort();
            const teams = selectedTeams.length > 0 ? selectedTeams : Object.keys(BRAZILIAN_TOKENS);
            
            const datasets = teams.map(team => {
                const teamData = dates.map(date => {
                    const item = data.find(d => d.date === date && d.team === team);
                    return item ? item.volume : 0;
                });
                
                return {
                    label: BRAZILIAN_TOKENS[team].name,
                    data: teamData,
                    borderColor: BRAZILIAN_TOKENS[team].color,
                    backgroundColor: BRAZILIAN_TOKENS[team].color + '20',
                    tension: 0.3
                };
            });
            
            charts.volume.data.labels = dates;
            charts.volume.data.datasets = datasets;
            charts.volume.update();
            
            // Update market share chart
            const teamVolumes = {};
            data.forEach(item => {
                if (!teamVolumes[item.team]) {
                    teamVolumes[item.team] = 0;
                }
                teamVolumes[item.team] += item.volume;
            });
            
            const sortedTeams = Object.entries(teamVolumes).sort((a, b) => b[1] - a[1]);
            
            charts.marketShare.data.labels = sortedTeams.map(([team]) => BRAZILIAN_TOKENS[team].name);
            charts.marketShare.data.datasets[0].data = sortedTeams.map(([, volume]) => volume);
            charts.marketShare.data.datasets[0].backgroundColor = sortedTeams.map(([team]) => BRAZILIAN_TOKENS[team].color);
            charts.marketShare.update();
        }

        // Update rankings table
        function updateRankings(data) {
            const rankings = {};
            
            data.forEach(item => {
                if (!rankings[item.team]) {
                    rankings[item.team] = {
                        team: item.team,
                        teamName: item.teamName,
                        totalVolume: 0,
                        totalTransactions: 0,
                        avgPrice: 0,
                        priceCount: 0
                    };
                }
                
                rankings[item.team].totalVolume += item.volume;
                rankings[item.team].totalTransactions += item.transactions;
                rankings[item.team].avgPrice += item.avgPrice;
                rankings[item.team].priceCount += 1;
            });
            
            const totalVolume = Object.values(rankings).reduce((sum, team) => sum + team.totalVolume, 0);
            
            const sortedRankings = Object.values(rankings)
                .map(team => ({
                    ...team,
                    avgPrice: team.avgPrice / team.priceCount,
                    marketShare: (team.totalVolume / totalVolume * 100)
                }))
                .sort((a, b) => b.totalVolume - a.totalVolume);
            
            const tbody = document.getElementById('rankingsTableBody');
            tbody.innerHTML = '';
            
            sortedRankings.forEach((team, index) => {
                const row = tbody.insertRow();
                row.innerHTML = `
                    <td>#${index + 1}</td>
                    <td>
                        <span class="team-badge" style="background: ${BRAZILIAN_TOKENS[team.team].color}20; color: ${BRAZILIAN_TOKENS[team.team].color}">
                            ${team.teamName}
                        </span>
                    </td>
                    <td>${formatNumber(team.totalVolume)} CHZ</td>
                    <td>${team.marketShare.toFixed(1)}%</td>
                    <td>R$ ${team.avgPrice.toFixed(2)}</td>
                `;
            });
        }

        // Update team comparison cards
        function updateComparison(data) {
            const teams = {};
            
            data.forEach(item => {
                if (!teams[item.team]) {
                    teams[item.team] = {
                        volume: 0,
                        transactions: 0
                    };
                }
                teams[item.team].volume += item.volume;
                teams[item.team].transactions += item.transactions;
            });
            
            const grid = document.getElementById('comparisonGrid');
            grid.innerHTML = '';
            
            Object.entries(BRAZILIAN_TOKENS).forEach(([symbol, config]) => {
                const card = document.createElement('div');
                card.className = 'comparison-card';
                card.innerHTML = `
                    <div class="comparison-team" style="color: ${config.color}">
                        ${config.name}
                    </div>
                    <div class="comparison-metric">
                        <span class="metric-label">Volume</span>
                        <span class="metric-value">${formatNumber(teams[symbol]?.volume || 0)}</span>
                    </div>
                    <div class="comparison-metric">
                        <span class="metric-label">Holders</span>
                        <span class="metric-value">${formatNumber(config.holders)}</span>
                    </div>
                    <div class="comparison-metric">
                        <span class="metric-label">Supply</span>
                        <span class="metric-value">${formatNumber(config.supply)}</span>
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        // Utility functions
        function formatNumber(num) {
            if (num >= 1000000) {
                return (num / 1000000).toFixed(2) + 'M';
            }
            if (num >= 1000) {
                return (num / 1000).toFixed(1) + 'K';
            }
            return num.toFixed(0);
        }

        // Button functions
        function showChainConfig() {
            alert('Chiliz Chain Configuration:\n\n' +
                  '‚Ä¢ Chain ID: 88888\n' +
                  '‚Ä¢ RPC: https://rpc.ankr.com/chiliz\n' +
                  '‚Ä¢ Explorer: https://chiliscan.com\n' +
                  '‚Ä¢ WebSocket: wss://chiliz.publicnode.com\n\n' +
                  'All Brazilian fan token contracts loaded and ready for integration.');
        }

        function toggleLiveMode() {
            liveMode = !liveMode;
            document.getElementById('connectionStatus').textContent = liveMode ? 'Live Mode (Simulated)' : 'Mock Data Mode';
            
            if (liveMode) {
                setInterval(() => {
                    // Simulate live updates
                    const today = new Date().toISOString().split('T')[0];
                    tokenData.forEach(item => {
                        if (item.date === today) {
                            item.volume = Math.floor(item.volume * (0.98 + Math.random() * 0.04));
                            item.transactions = Math.floor(item.transactions * (0.98 + Math.random() * 0.04));
                        }
                    });
                    updateDashboard();
                }, 5000);
            }
        }

        function refreshData() {
            generateMockData();
            updateDashboard();
            alert('Data refreshed successfully!');
        }

        function exportData() {
            const filteredData = getFilteredData();
            const csvContent = 'Date,Team,Volume,Transactions,Avg Price\n' +
                filteredData.map(item => 
                    `${item.date},${item.teamName},${item.volume},${item.transactions},${item.avgPrice.toFixed(2)}`
                ).join('\n');
            
            const blob = new Blob([csvContent], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `fan-tokens-${new Date().toISOString().split('T')[0]}.csv`;
            a.click();
        }

        // Update on date change
        document.getElementById('startDate').addEventListener('change', () => {
            generateMockData();
            updateDashboard();
        });
        
        document.getElementById('endDate').addEventListener('change', () => {
            generateMockData();
            updateDashboard();
        });
    </script>
</body>
</html>